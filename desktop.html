<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VanillaIceOS - Sistema Operacional Gamer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    /* Mantive todos os estilos CSS originais com as modificações necessárias */
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #8b5cf6;
      --accent: #ec4899;
      --dark: #0f172a;
      --darker: #020617;
      --light: #e2e8f0;
      --gray: #64748b;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --rgb-red: #ff006e;
      --rgb-green: #00ff88;
      --rgb-blue: #00d9ff;
      --neon-purple: #bf00ff;
      --neon-blue: #00d4ff;
      --neon-pink: #ff0080;
      --neon-yellow: #ffeb3b;
      --neon-orange: #ff6b35;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
      color: var(--light);
      min-height: 100vh;
      overflow: hidden;
      position: relative;
      user-select: none;
    }
    
    /* Animated background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: 
        radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%);
      animation: bgPulse 20s ease-in-out infinite;
      z-index: -2;
    }
    
    /* RGB particles background */
    .rgb-particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }
    
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      opacity: 0.7;
      animation: float 20s infinite linear;
    }
    
    /* Matrix rain effect */
    .matrix-rain {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      opacity: 0.1;
      overflow: hidden;
    }
    
    .matrix-column {
      position: absolute;
      top: -100%;
      font-family: 'Share Tech Mono', monospace;
      font-size: 14px;
      color: var(--rgb-green);
      animation: matrixFall linear infinite;
    }
    
    /* Glitch overlay */
    .glitch-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
      opacity: 0;
      background: 
        linear-gradient(transparent 50%, rgba(255, 0, 0, 0.03) 50%),
        linear-gradient(90deg, transparent 50%, rgba(0, 255, 0, 0.03) 50%),
        linear-gradient(transparent 50%, rgba(0, 0, 255, 0.03) 50%);
      background-size: 100% 4px, 4px 100%, 100% 4px;
      animation: glitchEffect 5s infinite;
    }
    
    .glitch-overlay.active {
      opacity: 1;
    }
    
    /* Loading screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: var(--darker);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      transition: opacity 0.5s ease;
    }
    
    .loading-logo {
      font-family: 'Orbitron', monospace;
      font-size: 4rem;
      font-weight: 900;
      background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 2rem;
      animation: pulse 2s infinite;
    }
    
    .loading-bar {
      width: 300px;
      height: 4px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .loading-progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      animation: loadingProgress 3s ease-out forwards;
    }
    
    /* Desktop widgets */
    .desktop-widget {
      position: absolute;
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      z-index: 50;
    }
    
    .clock-widget {
      top: 20px;
      right: 20px;
      width: 200px;
      text-align: center;
    }
    
    .clock-time {
      font-family: 'Orbitron', monospace;
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 20px rgba(0, 217, 255, 0.5);
    }
    
    .clock-date {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      color: var(--gray);
      margin-top: 5px;
    }
    
    .weather-widget {
      top: 20px;
      left: 20px;
      width: 180px;
    }
    
    .weather-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    
    .weather-icon {
      font-size: 2rem;
      color: var(--neon-yellow);
    }
    
    .weather-temp {
      font-family: 'Orbitron', monospace;
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .weather-desc {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    .weather-details {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
      font-size: 0.7rem;
    }
    
    .weather-detail {
      text-align: center;
    }
    
    .weather-detail-value {
      font-family: 'Orbitron', monospace;
      color: var(--primary);
    }
    
    /* Context menu */
    .context-menu {
      position: fixed;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      padding: 5px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      z-index: 5000;
      display: none;
      min-width: 200px;
    }
    
    .context-menu.active {
      display: block;
    }
    
    .context-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.85rem;
    }
    
    .context-item:hover {
      background: rgba(99, 102, 241, 0.2);
    }
    
    .context-item i {
      width: 16px;
      text-align: center;
    }
    
    .context-separator {
      height: 1px;
      background: rgba(99, 102, 241, 0.2);
      margin: 5px 0;
    }
    
    /* Notifications */
    .notifications-container {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 350px;
      z-index: 4000;
      pointer-events: none;
    }
    
    .notification {
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 10px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      pointer-events: auto;
      animation: slideInRight 0.3s ease-out;
      position: relative;
      overflow: hidden;
    }
    
    .notification::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 4px;
      height: 100%;
      background: var(--primary);
    }
    
    .notification.success::before {
      background: var(--success);
    }
    
    .notification.warning::before {
      background: var(--warning);
    }
    
    .notification.error::before {
      background: var(--danger);
    }
    
    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    .notification-title {
      font-family: 'Orbitron', monospace;
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .notification-close {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: var(--danger);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 0.7rem;
      transition: all 0.2s ease;
    }
    
    .notification-close:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: rotate(90deg);
    }
    
    .notification-content {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    /* Search bar */
    .search-container {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 400px;
      z-index: 100;
    }
    
    .search-bar {
      width: 100%;
      padding: 12px 20px;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 30px;
      color: var(--light);
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      outline: none;
      transition: all 0.3s ease;
    }
    
    .search-bar:focus {
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
    }
    
    .search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      margin-top: 10px;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      max-height: 400px;
      overflow-y: auto;
    }
    
    .search-results.active {
      display: block;
    }
    
    .search-result-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .search-result-item:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .search-result-icon {
      width: 30px;
      height: 30px;
      border-radius: 8px;
      background: rgba(99, 102, 241, 0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1rem;
    }
    
    .search-result-info h4 {
      font-size: 0.85rem;
      margin-bottom: 2px;
    }
    
    .search-result-info p {
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    /* Voice assistant */
    .voice-assistant {
      position: fixed;
      bottom: 80px;
      left: 20px;
      width: 60px;
      height: 60px;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 100;
    }
    
    .voice-assistant:hover {
      transform: scale(1.1);
      border-color: var(--primary);
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
    }
    
    .voice-assistant.active {
      animation: pulse 1s infinite;
    }
    
    .voice-assistant i {
      font-size: 1.5rem;
      color: var(--neon-blue);
    }
    
    /* Game mode indicator */
    .game-mode {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.5);
      border-radius: 20px;
      padding: 5px 15px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
      color: var(--danger);
      z-index: 100;
      display: none;
    }
    
    .game-mode.active {
      display: flex;
    }
    
    .game-mode i {
      animation: pulse 2s infinite;
    }
    
    /* Animations */
    @keyframes bgPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    
    @keyframes float {
      0% {
        transform: translateY(100vh) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.7;
      }
      90% {
        opacity: 0.7;
      }
      100% {
        transform: translateY(-100vh) rotate(360deg);
        opacity: 0;
      }
    }
    
    @keyframes matrixFall {
      to {
        transform: translateY(100vh);
      }
    }
    
    @keyframes glitchEffect {
      0%, 100% { opacity: 0; }
      1%, 2% { opacity: 1; }
      3% { opacity: 0; }
      7%, 8% { opacity: 1; }
      9% { opacity: 0; }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    @keyframes loadingProgress {
      to { width: 100%; }
    }
    
    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideInUp {
      from {
        transform: translateY(50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes rgbPulse {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }
    
    @keyframes glow {
      0% { box-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary), 0 0 15px var(--primary); }
      50% { box-shadow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary); }
      100% { box-shadow: 0 0 5px var(--primary), 0 0 10px var(--primary), 0 0 15px var(--primary); }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes borderGlow {
      0% { border-color: var(--primary); }
      25% { border-color: var(--secondary); }
      50% { border-color: var(--accent); }
      75% { border-color: var(--rgb-blue); }
      100% { border-color: var(--primary); }
    }
    
    @keyframes hexagonPulse {
      0% { transform: scale(1); opacity: 0.7; }
      50% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(1); opacity: 0.7; }
    }
    
    @keyframes scanline {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
    
    @keyframes glitch {
      0% { text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75), -0.05em -0.025em 0 rgba(0, 255, 0, 0.75), -0.025em 0.05em 0 rgba(0, 0, 255, 0.75); }
      14% { text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75), -0.05em -0.025em 0 rgba(0, 255, 0, 0.75), -0.025em 0.05em 0 rgba(0, 0, 255, 0.75); }
      15% { text-shadow: -0.05em -0.025em 0 rgba(255, 0, 0, 0.75), 0.025em 0.025em 0 rgba(0, 255, 0, 0.75), -0.05em -0.05em 0 rgba(0, 0, 255, 0.75); }
      49% { text-shadow: -0.05em -0.025em 0 rgba(255, 0, 0, 0.75), 0.025em 0.025em 0 rgba(0, 255, 0, 0.75), -0.05em -0.05em 0 rgba(0, 0, 255, 0.75); }
      50% { text-shadow: 0.025em 0.05em 0 rgba(255, 0, 0, 0.75), 0.05em 0 0 rgba(0, 255, 0, 0.75), 0 -0.05em 0 rgba(0, 0, 255, 0.75); }
      99% { text-shadow: 0.025em 0.05em 0 rgba(255, 0, 0, 0.75), 0.05em 0 0 rgba(0, 255, 0, 0.75), 0 -0.05em 0 rgba(0, 0, 255, 0.75); }
      100% { text-shadow: -0.025em 0 0 rgba(255, 0, 0, 0.75), -0.025em -0.025em 0 rgba(0, 255, 0, 0.75), -0.025em -0.05em 0 rgba(0, 0, 255, 0.75); }
    }
    
    @keyframes dataStream {
      0% { transform: translateY(0); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(-100px); opacity: 0; }
    }
    
    @keyframes zoomIn {
      from { transform: scale(1); }
      to { transform: scale(1.1); }
    }
    
    @keyframes appLaunch {
      0% { transform: scale(0.8); opacity: 0; }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    /* Desktop area */
    .desktop {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
      z-index: 10;
    }
    
    /* Desktop content */
    .desktop-content {
      flex: 1;
      position: relative;
      overflow: hidden;
    }
    
    /* Desktop icons */
    .desktop-icons {
      position: absolute;
      top: 100px;
      left: 20px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      z-index: 50;
    }
    
    .desktop-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 80px;
    }
    
    .desktop-icon:hover {
      background: rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }
    
    .desktop-icon.selected {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.5);
    }
    
    .desktop-icon i {
      font-size: 2rem;
      color: var(--primary);
    }
    
    .desktop-icon span {
      font-size: 0.7rem;
      text-align: center;
      color: var(--light);
    }
    
    /* Desktop folders */
    .desktop-folder {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 80px;
      position: absolute;
    }
    
    .desktop-folder:hover {
      background: rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }
    
    .desktop-folder.selected {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.5);
    }
    
    .desktop-folder i {
      font-size: 2rem;
      color: var(--warning);
    }
    
    .desktop-folder span {
      font-size: 0.7rem;
      text-align: center;
      color: var(--light);
    }
    
    /* Taskbar */
    .taskbar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: rgba(15, 23, 42, 0.8);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(99, 102, 241, 0.5);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      z-index: 100;
      box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
    }
    
    .taskbar::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary), var(--secondary), var(--accent), transparent);
      animation: borderGlow 4s linear infinite;
    }
    
    /* Taskbar sections */
    .taskbar-left, .taskbar-center, .taskbar-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    /* Taskbar buttons */
    .taskbar-button {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.2);
      color: var(--light);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      position: relative;
    }
    
    .taskbar-button:hover {
      background: rgba(99, 102, 241, 0.2);
      border-color: rgba(99, 102, 241, 0.5);
      transform: translateY(-2px);
    }
    
    .taskbar-button.active {
      background: rgba(99, 102, 241, 0.3);
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
    }
    
    /* Taskbar apps */
    .taskbar-apps {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    
    .taskbar-apps::-webkit-scrollbar {
      display: none;
    }
    
    .taskbar-app {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.2);
      color: var(--light);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 18px;
      position: relative;
    }
    
    .taskbar-app:hover {
      background: rgba(99, 102, 241, 0.2);
      border-color: rgba(99, 102, 241, 0.5);
      transform: translateY(-2px);
    }
    
    .taskbar-app.active {
      background: rgba(99, 102, 241, 0.3);
      border-color: var(--primary);
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
    }
    
    /* Taskbar divider */
    .taskbar-divider {
      width: 1px;
      height: 30px;
      background: rgba(99, 102, 241, 0.3);
      border-radius: 1px;
    }
    
    /* System controls */
    .system-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    /* Brightness control */
    .brightness-control {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .brightness-icon {
      color: var(--neon-yellow);
    }
    
    .brightness-slider {
      width: 80px;
      height: 4px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 2px;
      position: relative;
      cursor: pointer;
    }
    
    .brightness-level {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 70%;
      background: linear-gradient(90deg, var(--neon-yellow), var(--warning));
      border-radius: 2px;
    }
    
    .brightness-handle {
      position: absolute;
      top: 50%;
      left: 70%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--light);
      box-shadow: 0 0 5px rgba(255, 235, 59, 0.5);
    }
    
    /* Volume control */
    .volume-control {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .volume-icon {
      color: var(--neon-blue);
    }
    
    .volume-slider {
      width: 80px;
      height: 4px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 2px;
      position: relative;
      cursor: pointer;
    }
    
    .volume-level {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 50%;
      background: linear-gradient(90deg, var(--neon-blue), var(--primary));
      border-radius: 2px;
    }
    
    .volume-handle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: var(--light);
      box-shadow: 0 0 5px rgba(0, 217, 255, 0.5);
    }
    
    /* Network control */
    .network-control {
      position: relative;
    }
    
    .network-icon {
      color: var(--rgb-green);
    }
    
    .network-status {
      position: absolute;
      top: -5px;
      right: -5px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--rgb-green);
      box-shadow: 0 0 5px rgba(0, 255, 136, 0.5);
    }
    
    /* Datetime display */
    .datetime-display {
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
      color: var(--light);
      text-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
      text-align: center;
    }
    
    /* Start menu */
    .start-menu {
      position: fixed;
      bottom: 70px;
      left: 50%;
      transform: translateX(-50%);
      width: 500px;
      max-height: 70vh;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 200;
      opacity: 0;
      transform: translateX(-50%) translateY(20px);
      transition: opacity 0.3s ease, transform 0.3s ease;
      overflow-y: auto;
    }
    
    .start-menu::-webkit-scrollbar {
      width: 8px;
    }
    
    .start-menu::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.5);
      border-radius: 4px;
    }
    
    .start-menu::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
      border-radius: 4px;
    }
    
    .start-menu.active {
      display: block;
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
    
    .start-menu-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .user-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid rgba(99, 102, 241, 0.5);
    }
    
    .user-details h3 {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      margin-bottom: 2px;
    }
    
    .user-details p {
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    .start-menu-search {
      margin-bottom: 15px;
    }
    
    .start-search-input {
      width: 100%;
      padding: 10px 15px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      color: var(--light);
      font-size: 0.85rem;
      outline: none;
    }
    
    .start-menu-categories {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      overflow-x: auto;
    }
    
    .start-menu-categories::-webkit-scrollbar {
      display: none;
    }
    
    .category-tab {
      padding: 8px 15px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 20px;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .category-tab:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .category-tab.active {
      background: rgba(99, 102, 241, 0.3);
      border-color: var(--primary);
    }
    
    .start-menu-apps {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .start-app {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .start-app:hover {
      background: rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }
    
    .start-app i {
      font-size: 1.5rem;
      margin-bottom: 5px;
      color: var(--primary);
    }
    
    .start-app span {
      font-size: 0.7rem;
      text-align: center;
    }
    
    .start-menu-power {
      display: flex;
      justify-content: space-between;
      padding-top: 10px;
      border-top: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .power-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 70px;
    }
    
    .power-option:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .power-option i {
      font-size: 1.2rem;
      margin-bottom: 3px;
    }
    
    .power-option.shutdown i {
      color: var(--danger);
    }
    
    .power-option.restart i {
      color: var(--warning);
    }
    
    .power-option.sleep i {
      color: var(--neon-blue);
    }
    
    .power-option.lock i {
      color: var(--neon-purple);
    }
    
    .power-option span {
      font-size: 0.6rem;
    }
    
    /* App Windows */
    .app-window {
      position: absolute;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      min-width: 400px;
      min-height: 300px;
      z-index: 1000;
      display: none;
    }
    
    .app-window.active {
      display: block;
      animation: slideInUp 0.4s ease-out;
    }
    
    .window-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(15, 23, 42, 0.7);
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      cursor: move;
      border-radius: 10px 10px 0 0;
    }
    
    .window-title {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--light);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .window-controls {
      display: flex;
      gap: 8px;
    }
    
    .window-control {
      width: 14px;
      height: 14px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 8px;
      color: rgba(0, 0, 0, 0.7);
    }
    
    .window-control.minimize {
      background: var(--warning);
    }
    
    .window-control.maximize {
      background: var(--success);
    }
    
    .window-control.close {
      background: var(--danger);
    }
    
    .window-content {
      height: calc(100% - 45px);
      overflow: hidden;
      border-radius: 0 0 10px 10px;
    }
    
    .window-content iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: rgba(15, 23, 42, 0.5);
    }
    
    /* Window resize handles */
    .resize-handle {
      position: absolute;
      background: transparent;
      z-index: 1001;
    }
    
    .resize-handle-top {
      top: 0;
      left: 10px;
      right: 10px;
      height: 10px;
      cursor: ns-resize;
    }
    
    .resize-handle-right {
      top: 10px;
      right: 0;
      bottom: 10px;
      width: 10px;
      cursor: ew-resize;
    }
    
    .resize-handle-bottom {
      bottom: 0;
      left: 10px;
      right: 10px;
      height: 10px;
      cursor: ns-resize;
    }
    
    .resize-handle-left {
      top: 10px;
      left: 0;
      bottom: 10px;
      width: 10px;
      cursor: ew-resize;
    }
    
    .resize-handle-top-right {
      top: 0;
      right: 0;
      width: 20px;
      height: 20px;
      cursor: nesw-resize;
    }
    
    .resize-handle-bottom-right {
      bottom: 0;
      right: 0;
      width: 20px;
      height: 20px;
      cursor: nwse-resize;
    }
    
    .resize-handle-bottom-left {
      bottom: 0;
      left: 0;
      width: 20px;
      height: 20px;
      cursor: nesw-resize;
    }
    
    .resize-handle-top-left {
      top: 0;
      left: 0;
      width: 20px;
      height: 20px;
      cursor: nwse-resize;
    }
    
    /* Settings Panel */
    .settings-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 700px;
      max-height: 85vh;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 300;
      overflow-y: auto;
    }
    
    /* Custom scrollbar for settings panel */
    .settings-panel::-webkit-scrollbar {
      width: 10px;
    }
    
    .settings-panel::-webkit-scrollbar-track {
      background: rgba(15, 23, 42, 0.5);
      border-radius: 5px;
    }
    
    .settings-panel::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
      border-radius: 5px;
    }
    
    .settings-panel::-webkit-scrollbar-thumb:hover {
      background: linear-gradient(to bottom, var(--secondary), var(--accent));
    }
    
    .settings-panel.active {
      display: block;
      opacity: 1;
    }
    
    .settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .settings-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .settings-close {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: var(--danger);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .settings-close:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: rotate(90deg);
    }
    
    .settings-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      padding-bottom: 10px;
    }
    
    .settings-tab {
      padding: 8px 16px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.2);
      border-radius: 8px 8px 0 0;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Orbitron', monospace;
    }
    
    .settings-tab:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .settings-tab.active {
      background: rgba(99, 102, 241, 0.3);
      border-color: var(--primary);
      border-bottom-color: transparent;
    }
    
    .settings-content {
      display: none;
    }
    
    .settings-content.active {
      display: block;
    }
    
    .settings-section {
      margin-bottom: 25px;
    }
    
    .settings-section-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: var(--secondary);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .settings-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
      transition: all 0.3s ease;
    }
    
    .settings-item:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .settings-label {
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .settings-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .settings-slider {
      width: 150px;
      height: 6px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 3px;
      position: relative;
      cursor: pointer;
    }
    
    .settings-slider-level {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 3px;
    }
    
    .settings-slider-handle {
      position: absolute;
      top: 50%;
      transform: translate(-50%, -50%);
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--light);
      box-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
    }
    
    .settings-value {
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
      color: var(--primary);
      min-width: 40px;
      text-align: right;
    }
    
    .settings-select {
      padding: 8px 12px;
      border-radius: 8px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: var(--light);
      font-size: 0.85rem;
      outline: none;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .settings-select:focus {
      border-color: var(--primary);
    }
    
    .settings-select option {
      background: var(--dark);
    }
    
    .settings-colors {
      display: flex;
      gap: 10px;
    }
    
    .settings-color {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    
    .settings-color:hover {
      transform: scale(1.1);
    }
    
    .settings-color.active {
      border-color: var(--light);
      box-shadow: 0 0 10px currentColor;
    }
    
    .settings-info {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding: 15px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
    }
    
    .info-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.85rem;
    }
    
    .info-label {
      color: var(--gray);
    }
    
    .info-value {
      font-family: 'Orbitron', monospace;
      color: var(--primary);
    }
    
    /* Wallpaper upload */
    .wallpaper-upload {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .wallpaper-preview {
      width: 100%;
      height: 120px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
    }
    
    .wallpaper-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .wallpaper-preview-text {
      color: var(--gray);
      font-size: 0.8rem;
      text-align: center;
    }
    
    .wallpaper-upload-button {
      padding: 8px 12px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .wallpaper-upload-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    .wallpaper-input {
      display: none;
    }
    
    /* Game Mode Settings */
    .game-mode-settings {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .game-mode-card {
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 10px;
      padding: 15px;
    }
    
    .game-mode-card h4 {
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      margin-bottom: 10px;
      color: var(--danger);
    }
    
    .game-mode-card p {
      font-size: 0.8rem;
      color: var(--gray);
      margin-bottom: 15px;
    }
    
    .game-mode-actions {
      display: flex;
      gap: 10px;
    }
    
    .game-mode-button {
      flex: 1;
      padding: 8px;
      border-radius: 8px;
      border: none;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .game-mode-enable {
      background: linear-gradient(135deg, var(--danger), var(--warning));
      color: white;
    }
    
    .game-mode-enable:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
    }
    
    .game-mode-configure {
      background: rgba(99, 102, 241, 0.2);
      color: var(--light);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .game-mode-configure:hover {
      background: rgba(99, 102, 241, 0.3);
    }
    
    /* Security Settings */
    .security-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 15px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
      transition: all 0.3s ease;
    }
    
    .security-item:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .security-info h4 {
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    
    .security-info p {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    .security-status {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .security-status-icon {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }
    
    .security-status-icon.secure {
      background: var(--success);
      box-shadow: 0 0 5px rgba(16, 185, 129, 0.5);
    }
    
    .security-status-icon.warning {
      background: var(--warning);
      box-shadow: 0 0 5px rgba(245, 158, 11, 0.5);
    }
    
    .security-status-icon.danger {
      background: var(--danger);
      box-shadow: 0 0 5px rgba(239, 68, 68, 0.5);
    }
    
    .security-status-text {
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
    }
    
    .security-status-text.secure {
      color: var(--success);
    }
    
    .security-status-text.warning {
      color: var(--warning);
    }
    
    .security-status-text.danger {
      color: var(--danger);
    }
    
    /* Update Center */
    .update-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
      margin-bottom: 10px;
    }
    
    .update-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: rgba(99, 102, 241, 0.2);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.2rem;
      color: var(--primary);
    }
    
    .update-details {
      flex: 1;
    }
    
    .update-details h4 {
      font-size: 0.9rem;
      margin-bottom: 3px;
    }
    
    .update-details p {
      font-size: 0.8rem;
      color: var(--gray);
    }
    
    .update-size {
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
      color: var(--secondary);
    }
    
    .update-actions {
      display: flex;
      gap: 8px;
    }
    
    .update-button {
      padding: 6px 12px;
      border-radius: 6px;
      border: none;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .update-install {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
    }
    
    .update-install:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    .update-later {
      background: rgba(99, 102, 241, 0.2);
      color: var(--light);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .update-later:hover {
      background: rgba(99, 102, 241, 0.3);
    }
    
    /* WiFi Menu */
    .wifi-menu {
      position: fixed;
      bottom: 70px;
      right: 20px;
      width: 300px;
      background: rgba(15, 23, 42, 0.9);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 200;
    }
    
    .wifi-menu.active {
      display: block;
    }
    
    .wifi-menu-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .wifi-menu-title {
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      font-weight: 600;
    }
    
    .wifi-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .toggle-switch {
      width: 40px;
      height: 20px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 10px;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .toggle-switch.active {
      background: rgba(99, 102, 241, 0.5);
    }
    
    .toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--light);
      transition: all 0.3s ease;
    }
    
    .toggle-switch.active .toggle-slider {
      left: 22px;
    }
    
    .wifi-networks {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .wifi-network {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      border-radius: 10px;
      background: rgba(15, 23, 42, 0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .wifi-network:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .wifi-network.active {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .wifi-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .wifi-icon {
      color: var(--rgb-green);
    }
    
    .wifi-details h4 {
      font-size: 0.85rem;
      margin-bottom: 2px;
    }
    
    .wifi-details p {
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    .wifi-strength {
      display: flex;
      gap: 2px;
    }
    
    .wifi-bar {
      width: 3px;
      height: 8px;
      background: var(--gray);
      border-radius: 1px;
    }
    
    .wifi-bar.active {
      background: var(--rgb-green);
    }
    
    .wifi-password-input {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: var(--light);
      margin-top: 10px;
      outline: none;
    }
    
    .wifi-password-input:focus {
      border-color: var(--primary);
    }
    
    .wifi-connect-button {
      width: 100%;
      padding: 8px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }
    
    .wifi-connect-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    /* Terminal Window */
    .terminal-window {
      background: #000;
      color: #0f0;
      font-family: 'Share Tech Mono', monospace;
      padding: 10px;
      height: 100%;
      overflow-y: auto;
    }
    
    .terminal-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #333;
    }
    
    .terminal-title {
      color: #0f0;
      font-size: 0.9rem;
    }
    
    .terminal-content {
      font-size: 0.9rem;
      line-height: 1.4;
    }
    
    .terminal-line {
      display: flex;
      margin-bottom: 5px;
    }
    
    .terminal-prompt {
      color: #0ff;
      margin-right: 5px;
    }
    
    .terminal-command {
      color: #fff;
    }
    
    .terminal-output {
      color: #0f0;
      margin-left: 20px;
    }
    
    .terminal-input-line {
      display: flex;
      align-items: center;
    }
    
    .terminal-input {
      flex: 1;
      background: transparent;
      border: none;
      color: #fff;
      font-family: inherit;
      font-size: inherit;
      outline: none;
    }
    
    /* File Manager */
    .file-manager {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .file-manager-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .file-path {
      display: flex;
      align-items: center;
      gap: 5px;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.9rem;
    }
    
    .file-path-separator {
      color: var(--gray);
    }
    
    .file-actions {
      display: flex;
      gap: 10px;
    }
    
    .file-action-button {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: var(--light);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .file-action-button:hover {
      background: rgba(99, 102, 241, 0.3);
      transform: translateY(-2px);
    }
    
    .file-manager-content {
      flex: 1;
      display: flex;
      overflow: hidden;
    }
    
    .file-sidebar {
      width: 200px;
      background: rgba(15, 23, 42, 0.5);
      border-right: 1px solid rgba(99, 102, 241, 0.2);
      padding: 10px;
      overflow-y: auto;
    }
    
    .sidebar-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 5px;
    }
    
    .sidebar-item:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .sidebar-item.active {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .file-main {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }
    
    .file-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 15px;
    }
    
    .file-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .file-item:hover {
      background: rgba(99, 102, 241, 0.1);
      transform: translateY(-2px);
    }
    
    .file-item.selected {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .file-icon {
      font-size: 2rem;
      color: var(--primary);
    }
    
    .file-name {
      font-size: 0.7rem;
      text-align: center;
      word-break: break-word;
    }
    
    .file-info {
      font-size: 0.6rem;
      color: var(--gray);
    }
    
    /* New Folder Dialog */
    .new-folder-dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 5000;
    }
    
    .new-folder-dialog.active {
      display: block;
      animation: slideInUp 0.3s ease-out;
    }
    
    .dialog-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .dialog-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .dialog-close {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: rgba(239, 68, 68, 0.2);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: var(--danger);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .dialog-close:hover {
      background: rgba(239, 68, 68, 0.3);
      transform: rotate(90deg);
    }
    
    .dialog-content {
      margin-bottom: 20px;
    }
    
    .dialog-input {
      width: 100%;
      padding: 12px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 8px;
      color: var(--light);
      font-size: 0.9rem;
      outline: none;
    }
    
    .dialog-input:focus {
      border-color: var(--primary);
    }
    
    .dialog-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .dialog-button {
      padding: 8px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .dialog-cancel {
      background: rgba(99, 102, 241, 0.2);
      color: var(--light);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .dialog-cancel:hover {
      background: rgba(99, 102, 241, 0.3);
    }
    
    .dialog-create {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
    }
    
    .dialog-create:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    /* Rename Dialog */
    .rename-dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 5000;
    }
    
    .rename-dialog.active {
      display: block;
      animation: slideInUp 0.3s ease-out;
    }
    
    /* Game Center */
    .game-center {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .game-center-header {
      padding: 15px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(245, 158, 11, 0.2));
    }
    
    .game-center-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 10px;
      background: linear-gradient(90deg, var(--danger), var(--warning));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .game-stats {
      display: flex;
      gap: 20px;
    }
    
    .game-stat {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .game-stat-value {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      font-weight: 700;
    }
    
    .game-stat-label {
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    .game-center-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    
    .no-games-message {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      color: var(--gray);
      margin-bottom: 20px;
    }
    
    .no-games-description {
      font-size: 0.9rem;
      color: var(--gray);
      max-width: 500px;
    }
    
    /* Media Player */
    .media-player {
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .player-header {
      padding: 15px;
      border-bottom: 1px solid rgba(99, 102, 241, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .player-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      font-weight: 700;
    }
    
    .player-upload {
      padding: 6px 12px;
      border-radius: 6px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      border: none;
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .player-upload:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    .player-main {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    
    .player-visualizer {
      flex: 1;
      background: rgba(15, 23, 42, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
    }
    
    .visualizer-bars {
      display: flex;
      align-items: flex-end;
      gap: 3px;
      height: 60%;
    }
    
    .visualizer-bar {
      width: 4px;
      background: linear-gradient(to top, var(--primary), var(--secondary), var(--accent));
      border-radius: 2px;
      animation: visualizerPulse 0.5s ease-in-out infinite alternate;
    }
    
    @keyframes visualizerPulse {
      0% { height: 20%; }
      100% { height: 100%; }
    }
    
    .player-info {
      padding: 20px;
      text-align: center;
    }
    
    .player-song-title {
      font-family: 'Orbitron', monospace;
      font-size: 1.1rem;
      margin-bottom: 5px;
    }
    
    .player-artist {
      font-size: 0.9rem;
      color: var(--gray);
      margin-bottom: 15px;
    }
    
    .player-progress {
      margin-bottom: 15px;
    }
    
    .progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(99, 102, 241, 0.2);
      border-radius: 3px;
      overflow: hidden;
      cursor: pointer;
    }
    
    .progress-fill {
      height: 100%;
      width: 30%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 3px;
    }
    
    .progress-time {
      display: flex;
      justify-content: space-between;
      font-size: 0.7rem;
      color: var(--gray);
      margin-top: 5px;
    }
    
    .player-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      padding: 0 20px 20px;
    }
    
    .player-button {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
      color: var(--light);
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .player-button:hover {
      background: rgba(99, 102, 241, 0.3);
      transform: scale(1.1);
    }
    
    .player-button.play {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border: none;
    }
    
    .player-button.play:hover {
      transform: scale(1.1);
      box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3);
    }
    
    .player-playlist {
      height: 200px;
      background: rgba(15, 23, 42, 0.5);
      border-top: 1px solid rgba(99, 102, 241, 0.2);
      padding: 10px;
      overflow-y: auto;
    }
    
    .playlist-title {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }
    
    .playlist-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 5px;
    }
    
    .playlist-item:hover {
      background: rgba(99, 102, 241, 0.1);
    }
    
    .playlist-item.active {
      background: rgba(99, 102, 241, 0.2);
      border: 1px solid rgba(99, 102, 241, 0.3);
    }
    
    .playlist-item-info h4 {
      font-size: 0.8rem;
      margin-bottom: 2px;
    }
    
    .playlist-item-info p {
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    .playlist-item-duration {
      margin-left: auto;
      font-family: 'Share Tech Mono', monospace;
      font-size: 0.7rem;
      color: var(--gray);
    }
    
    /* Voice Assistant Modal */
    .voice-assistant-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      background: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(15px);
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
      display: none;
      z-index: 5000;
      text-align: center;
    }
    
    .voice-assistant-modal.active {
      display: block;
      animation: slideInUp 0.3s ease-out;
    }
    
    .voice-assistant-icon {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--neon-blue), var(--neon-purple));
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 3rem;
      margin: 0 auto 20px;
      animation: pulse 2s infinite;
    }
    
    .voice-assistant-status {
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    
    .voice-assistant-response {
      font-size: 0.9rem;
      color: var(--gray);
      margin-bottom: 20px;
      min-height: 40px;
    }
    
    .voice-assistant-close {
      padding: 8px 20px;
      border-radius: 8px;
      background: rgba(99, 102, 241, 0.2);
      color: var(--light);
      border: 1px solid rgba(99, 102, 241, 0.3);
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .voice-assistant-close:hover {
      background: rgba(99, 102, 241, 0.3);
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .taskbar {
        padding: 0 10px;
        height: 50px;
      }
      
      .taskbar-button {
        width: 36px;
        height: 36px;
        font-size: 16px;
      }
      
      .brightness-slider, .volume-slider {
        width: 60px;
      }
      
      .start-menu {
        width: 90%;
        max-width: 350px;
      }
      
      .start-menu-apps {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .wifi-menu {
        width: 90%;
        max-width: 300px;
      }
      
      .settings-panel {
        width: 90%;
        max-width: 500px;
      }
      
      .search-container {
        width: 90%;
        max-width: 300px;
      }
      
      .desktop-widget {
        display: none;
      }
      
      .voice-assistant {
        bottom: 70px;
      }
      
      .desktop-icons {
        top: 80px;
        left: 10px;
      }
      
      .desktop-icon, .desktop-folder {
        width: 70px;
      }
      
      .desktop-icon i, .desktop-folder i {
        font-size: 1.8rem;
      }
      
      .desktop-icon span, .desktop-folder span {
        font-size: 0.6rem;
      }
    }
    
    @media (max-width: 480px) {
      .taskbar-center {
        gap: 5px;
      }
      
      .taskbar-button {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .taskbar-apps {
        gap: 5px;
      }
      
      .taskbar-app {
        width: 32px;
        height: 32px;
        font-size: 14px;
      }
      
      .brightness-control, .volume-control {
        display: none;
      }
      
      .datetime-display {
        font-size: 0.7rem;
      }
      
      .start-menu {
        width: 95%;
        max-width: 300px;
      }
      
      .start-menu-apps {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }
      
      .start-app {
        padding: 8px;
      }
      
      .start-app i {
        font-size: 1.2rem;
      }
      
      .start-app span {
        font-size: 0.6rem;
      }
      
      .settings-panel {
        width: 95%;
        max-width: 350px;
        padding: 15px;
      }
      
      .settings-title {
        font-size: 1.2rem;
      }
      
      .settings-tab {
        padding: 6px 12px;
        font-size: 0.8rem;
      }
      
      .settings-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .settings-control {
        width: 100%;
        justify-content: space-between;
      }
      
      .settings-slider {
        width: 100%;
      }
      
      .app-window {
        min-width: 90%;
        min-height: 70%;
      }
      
      .window-header {
        padding: 8px 12px;
      }
      
      .window-title {
        font-size: 0.8rem;
      }
      
      .window-control {
        width: 12px;
        height: 12px;
      }
      
      .game-center-content {
        padding: 10px;
      }
      
      .no-games-message {
        font-size: 1rem;
      }
      
      .no-games-description {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-logo">VanillaIceOS</div>
    <div class="loading-bar">
      <div class="loading-progress"></div>
    </div>
  </div>
  
  <!-- Background elements -->
  <div class="rgb-particles" id="particles"></div>
  <div class="matrix-rain" id="matrixRain"></div>
  <div class="glitch-overlay" id="glitchOverlay"></div>
  
  <!-- Desktop -->
  <div class="desktop">
    <!-- Desktop Content -->
    <div class="desktop-content" id="desktopContent">
      <!-- Search Bar -->
      <div class="search-container">
        <input type="text" class="search-bar" id="searchBar" placeholder="Pesquisar aplicativos, arquivos, configurações...">
        <div class="search-results" id="searchResults"></div>
      </div>
      
      <!-- Desktop Widgets -->
      <div class="desktop-widget clock-widget">
        <div class="clock-time" id="clockTime">00:00</div>
        <div class="clock-date" id="clockDate">Seg 01 Jan</div>
      </div>
      
      <div class="desktop-widget weather-widget">
        <div class="weather-header">
          <i class="fas fa-sun weather-icon"></i>
          <div class="weather-temp">--°C</div>
        </div>
        <div class="weather-desc">Carregando...</div>
        <div class="weather-details">
          <div class="weather-detail">
            <div class="weather-detail-value">--%</div>
            <div>Umidade</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-value">--km/h</div>
            <div>Vento</div>
          </div>
          <div class="weather-detail">
            <div class="weather-detail-value">--mb</div>
            <div>Pressão</div>
          </div>
        </div>
      </div>
      
      <!-- Desktop Icons -->
      <div class="desktop-icons" id="desktopIcons">
        <div class="desktop-icon" data-app="filemanager" data-title="Arquivos" data-icon="fas fa-folder" data-path="filemanager.html">
          <i class="fas fa-folder"></i>
          <span>Arquivos</span>
        </div>
        <div class="desktop-icon" data-app="terminal" data-title="Terminal" data-icon="fas fa-terminal" data-path="terminal.html">
          <i class="fas fa-terminal"></i>
          <span>Terminal</span>
        </div>
        <div class="desktop-icon" data-app="settings" data-title="Configurações" data-icon="fas fa-cog" data-path="settings.html">
          <i class="fas fa-cog"></i>
          <span>Configurações</span>
        </div>
        <div class="desktop-icon" data-app="gamecenter" data-title="Central de Jogos" data-icon="fas fa-gamepad" data-path="gamecenter.html">
          <i class="fas fa-gamepad"></i>
          <span>Central de Jogos</span>
        </div>
        <div class="desktop-icon" data-app="mediaplayer" data-title="Reprodutor de Mídia" data-icon="fas fa-play-circle" data-path="mediaplayer.html">
          <i class="fas fa-play-circle"></i>
          <span>Reprodutor de Mídia</span>
        </div>
        <div class="desktop-icon" data-app="about" data-title="Sobre Nós" data-icon="fas fa-question" data-path="seleneteam.html">
          <i class="fas fa-question"></i>
          <span>Sobre Nós</span>
        </div>
      </div>
      
      <!-- Desktop folders will be dynamically added here -->
      
      <!-- App windows will be dynamically added here -->
    </div>
    
    <!-- Taskbar -->
    <div class="taskbar">
      <!-- Left side: Brightness and Volume controls -->
      <div class="taskbar-left">
        <div class="system-control">
          <div class="brightness-control">
            <i class="fas fa-sun brightness-icon"></i>
            <div class="brightness-slider" id="brightnessSlider">
              <div class="brightness-level"></div>
              <div class="brightness-handle"></div>
            </div>
          </div>
          
          <div class="taskbar-divider"></div>
          
          <div class="volume-control">
            <i class="fas fa-volume-up volume-icon"></i>
            <div class="volume-slider" id="volumeSlider">
              <div class="volume-level"></div>
              <div class="volume-handle"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Center: Start and Settings buttons -->
      <div class="taskbar-center">
        <button class="taskbar-button" id="startButton">
          <i class="fas fa-th"></i>
        </button>
        
        <div class="taskbar-divider"></div>
        
        <button class="taskbar-button" id="settingsButton">
          <i class="fas fa-cog"></i>
        </button>
        
        <div class="taskbar-divider"></div>
        
        <!-- Taskbar Apps -->
        <div class="taskbar-apps" id="taskbarApps">
          <!-- App icons will be dynamically added here -->
        </div>
      </div>
      
      <!-- Right side: Network and Datetime -->
      <div class="taskbar-right">
        <div class="system-control">
          <div class="network-control" id="networkControl">
            <i class="fas fa-wifi network-icon"></i>
            <div class="network-status"></div>
          </div>
          
          <div class="taskbar-divider"></div>
          
          <div class="datetime-display" id="datetimeDisplay">
            <div class="time">15:39</div>
            <div class="date">3 abr</div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Start Menu -->
    <div class="start-menu" id="startMenu">
      <div class="start-menu-header">
        <div class="user-info">
          <img src="logouser.png" alt="User" class="user-avatar">
          <div class="user-details">
            <h3>ADM</h3>
            <p>Administrador</p>
          </div>
        </div>
      </div>
      
      <div class="start-menu-search">
        <input type="text" class="start-search-input" placeholder="Pesquisar aplicativos...">
      </div>
      
      <div class="start-menu-categories">
        <div class="category-tab active" data-category="all">Todos</div>
        <div class="category-tab" data-category="productivity">Produtividade</div>
        <div class="category-tab" data-category="games">Jogos</div>
        <div class="category-tab" data-category="media">Mídia</div>
        <div class="category-tab" data-category="development">Desenvolvimento</div>
        <div class="category-tab" data-category="system">Sistema</div>
      </div>
      
      <div class="start-menu-apps" id="startMenuApps">
        <div class="start-app" data-app="calendar" data-title="Calendário" data-icon="fas fa-calendar-alt" data-path="calendar2.html" data-category="productivity">
          <i class="fas fa-calendar-alt"></i>
          <span>Calendário</span>
        </div>
        <div class="start-app" data-app="weather" data-title="Clima" data-icon="fas fa-cloud-sun" data-path="clima2.html" data-category="productivity">
          <i class="fas fa-cloud-sun"></i>
          <span>Clima</span>
        </div>
        <div class="start-app" data-app="clock" data-title="Relógio" data-icon="fas fa-clock" data-path="clock2.html" data-category="productivity">
          <i class="fas fa-clock"></i>
          <span>Relógio</span>
        </div>
        <div class="start-app" data-app="gallery" data-title="Galeria" data-icon="fas fa-images" data-path="gallery2.html" data-category="media">
          <i class="fas fa-images"></i>
          <span>Galeria</span>
        </div>
        <div class="start-app" data-app="mail" data-title="E-mail" data-icon="fas fa-envelope" data-path="mail2.html" data-category="productivity">
          <i class="fas fa-envelope"></i>
          <span>E-mail</span>
        </div>
        <div class="start-app" data-app="notepad" data-title="Bloco de Notas" data-icon="fas fa-sticky-note" data-path="notepad2.html" data-category="productivity">
          <i class="fas fa-sticky-note"></i>
          <span>Bloco de Notas</span>
        </div>
        <div class="start-app" data-app="paint" data-title="Paint" data-icon="fas fa-paint-brush" data-path="paint3.html" data-category="media">
          <i class="fas fa-paint-brush"></i>
          <span>Paint</span>
        </div>
        <div class="start-app" data-app="system" data-title="Sistema" data-icon="fas fa-desktop" data-path="system2.html" data-category="system">
          <i class="fas fa-desktop"></i>
          <span>Sistema</span>
        </div>
        <div class="start-app" data-app="terminal" data-title="Terminal" data-icon="fas fa-terminal" data-path="terminal.html" data-category="development">
          <i class="fas fa-terminal"></i>
          <span>Terminal</span>
        </div>
        <div class="start-app" data-app="filemanager" data-title="Arquivos" data-icon="fas fa-folder" data-path="filemanager.html" data-category="system">
          <i class="fas fa-folder"></i>
          <span>Arquivos</span>
        </div>
        <div class="start-app" data-app="mediaplayer" data-title="Reprodutor de Mídia" data-icon="fas fa-play-circle" data-path="mediaplayer.html" data-category="media">
          <i class="fas fa-play-circle"></i>
          <span>Reprodutor de Mídia</span>
        </div>
        <div class="start-app" data-app="gamecenter" data-title="Central de Jogos" data-icon="fas fa-gamepad" data-path="gamecenter.html" data-category="games">
          <i class="fas fa-gamepad"></i>
          <span>Central de Jogos</span>
        </div>
      </div>
      
      <div class="start-menu-power">
        <div class="power-option shutdown" id="shutdownOption">
          <i class="fas fa-power-off"></i>
          <span>Desligar</span>
        </div>
        <div class="power-option restart" id="restartOption">
          <i class="fas fa-redo"></i>
          <span>Reiniciar</span>
        </div>
        <div class="power-option sleep" id="sleepOption">
          <i class="fas fa-moon"></i>
          <span>Suspender</span>
        </div>
        <div class="power-option lock" id="lockOption">
          <i class="fas fa-lock"></i>
          <span>Bloquear</span>
        </div>
      </div>
    </div>
    
    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel">
      <div class="settings-header">
        <div class="settings-title">
          <i class="fas fa-cog"></i>
          Configurações do Sistema
        </div>
        <div class="settings-close" id="settingsClose">
          <i class="fas fa-times"></i>
        </div>
      </div>
      
      <div class="settings-tabs">
        <div class="settings-tab active" data-tab="personalization">Personalização</div>
        <div class="settings-tab" data-tab="display">Tela</div>
        <div class="settings-tab" data-tab="sound">Som</div>
        <div class="settings-tab" data-tab="network">Rede</div>
        <div class="settings-tab" data-tab="gaming">Modo Gamer</div>
        <div class="settings-tab" data-tab="security">Segurança</div>
        <div class="settings-tab" data-tab="updates">Atualizações</div>
        <div class="settings-tab" data-tab="about">Sobre</div>
      </div>
      
      <!-- Personalization Tab -->
      <div class="settings-content active" id="personalization">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-palette"></i>
            Aparência
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Tema de Cores</div>
            <div class="settings-control">
              <div class="settings-colors">
                <div class="settings-color active" style="background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899)" data-theme="default"></div>
                <div class="settings-color" style="background: linear-gradient(135deg, #00d9ff, #00ff88, #ff006e)" data-theme="rgb"></div>
                <div class="settings-color" style="background: linear-gradient(135deg, #ff9a00, #ff0000, #ff00ff)" data-theme="fire"></div>
                <div class="settings-color" style="background: linear-gradient(135deg, #00ff88, #00d9ff, #bf00ff)" data-theme="nature"></div>
                <div class="settings-color" style="background: linear-gradient(135deg, #ffeb3b, #ff9800, #f44336)" data-theme="sunset"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Fundo</div>
            <div class="settings-control">
              <select class="settings-select" id="backgroundSelect">
                <option value="default">Padrão</option>
                <option value="dark">Escuro</option>
                <option value="matrix">Matrix</option>
                <option value="nebula">Nebulosa</option>
                <option value="cyber">Cyberpunk</option>
                <option value="custom">Personalizado</option>
              </select>
            </div>
          </div>
          
          <div class="settings-item" id="wallpaperUploadItem" style="display: none;">
            <div class="settings-label">Papel de Parede</div>
            <div class="settings-control">
              <div class="wallpaper-upload">
                <div class="wallpaper-preview" id="wallpaperPreview">
                  <div class="wallpaper-preview-text">Nenhuma imagem selecionada</div>
                </div>
                <button class="wallpaper-upload-button" id="wallpaperUploadButton">
                  <i class="fas fa-upload"></i> Carregar Imagem
                </button>
                <input type="file" class="wallpaper-input" id="wallpaperInput" accept="image/*">
              </div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-magic"></i>
            Efeitos Visuais
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Efeitos de Partículas</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="particlesToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Efeito Matrix</div>
            <div class="settings-control">
              <div class="toggle-switch" id="matrixToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Efeito Glitch</div>
            <div class="settings-control">
              <div class="toggle-switch" id="glitchToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Animações</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="animationsToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Display Tab -->
      <div class="settings-content" id="display">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-desktop"></i>
            Configurações de Tela
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Brilho</div>
            <div class="settings-control">
              <div class="settings-slider" id="settingsBrightnessSlider">
                <div class="settings-slider-level"></div>
                <div class="settings-slider-handle"></div>
              </div>
              <div class="settings-value" id="settingsBrightnessValue">70%</div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Resolução</div>
            <div class="settings-control">
              <select class="settings-select" id="resolutionSelect">
                <option value="auto">Automática</option>
                <option value="1920x1080">1920 × 1080</option>
                <option value="1366x768">1366 × 768</option>
                <option value="1280x720">1280 × 720</option>
              </select>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Taxa de Atualização</div>
            <div class="settings-control">
              <select class="settings-select" id="refreshRateSelect">
                <option value="60">60 Hz</option>
                <option value="120">120 Hz</option>
                <option value="144">144 Hz</option>
                <option value="240">240 Hz</option>
              </select>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-eye"></i>
            Acessibilidade
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Tamanho do Texto</div>
            <div class="settings-control">
              <select class="settings-select" id="textSizeSelect">
                <option value="small">Pequeno</option>
                <option value="medium" selected>Médio</option>
                <option value="large">Grande</option>
                <option value="xlarge">Extra Grande</option>
              </select>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Contraste</div>
            <div class="settings-control">
              <div class="toggle-switch" id="highContrastToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Sound Tab -->
      <div class="settings-content" id="sound">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-volume-up"></i>
            Configurações de Áudio
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Volume Principal</div>
            <div class="settings-control">
              <div class="settings-slider" id="settingsVolumeSlider">
                <div class="settings-slider-level"></div>
                <div class="settings-slider-handle"></div>
              </div>
              <div class="settings-value" id="settingsVolumeValue">50%</div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Efeitos Sonoros</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="soundEffectsToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Dispositivo de Saída</div>
            <div class="settings-control">
              <select class="settings-select" id="audioDeviceSelect">
                <option value="default">Alto-falantes</option>
                <option value="headphones">Fones de Ouvido</option>
                <option value="bluetooth">Bluetooth</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Network Tab -->
      <div class="settings-content" id="network">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-wifi"></i>
            Rede e Internet
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Wi-Fi</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="wifiSettingsToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">VPN</div>
            <div class="settings-control">
              <div class="toggle-switch" id="vpnToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Proxy</div>
            <div class="settings-control">
              <select class="settings-select" id="proxySelect">
                <option value="none">Nenhum</option>
                <option value="auto">Detectar automaticamente</option>
                <option value="manual">Configurar manualmente</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Gaming Tab -->
      <div class="settings-content" id="gaming">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-gamepad"></i>
            Modo Gamer
          </div>
          
          <div class="game-mode-settings">
            <div class="game-mode-card">
              <h4><i class="fas fa-rocket"></i> Modo Gamer</h4>
              <p>Otimiza o sistema para máxima performance em jogos</p>
              <div class="game-mode-actions">
                <button class="game-mode-button game-mode-enable" id="gameModeEnable">Ativar Modo Gamer</button>
                <button class="game-mode-button game-mode-configure">Configurar</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-sliders-h"></i>
            Configurações de Jogos
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Game Bar</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="gameBarToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Gravação de Jogos</div>
            <div class="settings-control">
              <div class="toggle-switch active" id="gameRecordingToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Modo Janela Sem Borda</div>
            <div class="settings-control">
              <div class="toggle-switch" id="borderlessToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Security Tab -->
      <div class="settings-content" id="security">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-shield-alt"></i>
            Segurança do Sistema
          </div>
          
          <div class="security-item">
            <div class="security-info">
              <h4>Proteção em Tempo Real</h4>
              <p>Protege contra malware e ameaças</p>
            </div>
            <div class="security-status">
              <div class="security-status-icon secure"></div>
              <div class="security-status-text secure">Ativo</div>
            </div>
          </div>
          
          <div class="security-item">
            <div class="security-info">
              <h4>Firewall</h4>
              <p>Protege contra acessos não autorizados</p>
            </div>
            <div class="security-status">
              <div class="security-status-icon secure"></div>
              <div class="security-status-text secure">Ativo</div>
            </div>
          </div>
          
          <div class="security-item">
            <div class="security-info">
              <h4>Atualizações Automáticas</h4>
              <p>Mantém o sistema atualizado</p>
            </div>
            <div class="security-status">
              <div class="security-status-icon secure"></div>
              <div class="security-status-text secure">Ativo</div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-user-shield"></i>
            Privacidade
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Coleta de Dados</div>
            <div class="settings-control">
              <div class="toggle-switch" id="dataCollectionToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          
          <div class="settings-item">
            <div class="settings-label">Localização</div>
            <div class="settings-control">
              <div class="toggle-switch" id="locationToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Updates Tab -->
      <div class="settings-content" id="updates">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-download"></i>
            Atualizações Disponíveis
          </div>
          
          <div class="update-item">
            <div class="update-icon">
              <i class="fas fa-star"></i>
            </div>
            <div class="update-details">
              <h4>VanillaIceOS v2.1</h4>
              <p>Novos recursos e melhorias de performance</p>
            </div>
            <div class="update-size">450 MB</div>
            <div class="update-actions">
              <button class="update-button update-install">Instalar</button>
              <button class="update-button update-later">Depois</button>
            </div>
          </div>
          
          <div class="update-item">
            <div class="update-icon">
              <i class="fas fa-shield-alt"></i>
            </div>
            <div class="update-details">
              <h4>Atualização de Segurança</h4>
              <p>Correções de vulnerabilidades críticas</p>
            </div>
            <div class="update-size">125 MB</div>
            <div class="update-actions">
              <button class="update-button update-install">Instalar</button>
              <button class="update-button update-later">Depois</button>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-history"></i>
            Histórico de Atualizações
          </div>
          
          <div class="settings-info">
            <div class="info-row">
              <div class="info-label">Última verificação</div>
              <div class="info-value" id="lastUpdateCheck">Hoje, 15:30</div>
            </div>
            <div class="info-row">
              <div class="info-label">Próxima verificação</div>
              <div class="info-value">Amanhã, 15:30</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- About Tab -->
      <div class="settings-content" id="about">
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-info-circle"></i>
            Sobre o VanillaIceOS
          </div>
          
          <div class="settings-info">
            <div class="info-row">
              <div class="info-label">Versão</div>
              <div class="info-value">VanillaIceOS v2.0</div>
            </div>
            <div class="info-row">
              <div class="info-label">Build</div>
              <div class="info-value">2024.04.03.01</div>
            </div>
            <div class="info-row">
              <div class="info-label">Arquitetura</div>
              <div class="info-value" id="systemArch">x64</div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-desktop"></i>
            Informações do Sistema
          </div>
          
          <div class="settings-info">
            <div class="info-row">
              <div class="info-label">Navegador</div>
              <div class="info-value" id="browserInfo">Detectando...</div>
            </div>
            <div class="info-row">
              <div class="info-label">Resolução</div>
              <div class="info-value" id="resolutionInfo">Detectando...</div>
            </div>
            <div class="info-row">
              <div class="info-label">Memória</div>
              <div class="info-value" id="memoryInfo">Detectando...</div>
            </div>
            <div class="info-row">
              <div class="info-label">Processador</div>
              <div class="info-value" id="cpuInfo">Detectando...</div>
            </div>
            <div class="info-row">
              <div class="info-label">Tempo Ativo</div>
              <div class="info-value" id="uptimeInfo">00:00:00</div>
            </div>
          </div>
        </div>
        
        <div class="settings-section">
          <div class="settings-section-title">
            <i class="fas fa-heart"></i>
            Créditos
          </div>
          
          <div class="settings-info">
            <div class="info-row">
              <div class="info-label">Desenvolvedor</div>
              <div class="info-value">Selene Team</div>
            </div>
            <div class="info-row">
              <div class="info-label">Design</div>
              <div class="info-value">UI/UX Team</div>
            </div>
            <div class="info-row">
              <div class="info-label">Agradecimentos</div>
              <div class="info-value">Comunidade Gamer</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- WiFi Menu -->
    <div class="wifi-menu" id="wifiMenu">
      <div class="wifi-menu-header">
        <div class="wifi-menu-title">Redes Wi-Fi</div>
        <div class="wifi-toggle">
          <span>Wi-Fi</span>
          <div class="toggle-switch active" id="wifiToggle">
            <div class="toggle-slider"></div>
          </div>
        </div>
      </div>
      
      <div class="wifi-networks" id="wifiNetworks">
        <div class="wifi-network active" data-network="home">
          <div class="wifi-info">
            <i class="fas fa-wifi wifi-icon"></i>
            <div class="wifi-details">
              <h4>VanillaIceOS_Home</h4>
              <p>Conectado</p>
            </div>
          </div>
          <div class="wifi-strength">
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
          </div>
        </div>
        
        <div class="wifi-network" data-network="office">
          <div class="wifi-info">
            <i class="fas fa-wifi wifi-icon"></i>
            <div class="wifi-details">
              <h4>VanillaIceOS_Office</h4>
              <p>WPA2</p>
            </div>
          </div>
          <div class="wifi-strength">
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
            <div class="wifi-bar"></div>
          </div>
        </div>
        
        <div class="wifi-network" data-network="guest">
          <div class="wifi-info">
            <i class="fas fa-wifi wifi-icon"></i>
            <div class="wifi-details">
              <h4>VanillaIceOS_Guest</h4>
              <p>Aberta</p>
            </div>
          </div>
          <div class="wifi-strength">
            <div class="wifi-bar active"></div>
            <div class="wifi-bar active"></div>
            <div class="wifi-bar"></div>
            <div class="wifi-bar"></div>
          </div>
        </div>
      </div>
      
      <div class="wifi-password-container" id="wifiPasswordContainer" style="display: none;">
        <input type="password" class="wifi-password-input" id="wifiPasswordInput" placeholder="Senha da rede">
        <button class="wifi-connect-button" id="wifiConnectButton">Conectar</button>
      </div>
    </div>
    
    <!-- Context Menu -->
    <div class="context-menu" id="contextMenu">
      <div class="context-item" id="contextRefresh">
        <i class="fas fa-sync-alt"></i>
        <span>Atualizar</span>
      </div>
      <div class="context-item" id="contextNewFolder">
        <i class="fas fa-folder-plus"></i>
        <span>Nova Pasta</span>
      </div>
      <div class="context-separator" id="contextSeparator"></div>
      <div class="context-item" id="contextPaste" style="display: none;">
        <i class="fas fa-paste"></i>
        <span>Colar</span>
      </div>
      <div class="context-separator" id="contextSeparator2" style="display: none;"></div>
      <div class="context-item" id="contextRename" style="display: none;">
        <i class="fas fa-edit"></i>
        <span>Renomear</span>
      </div>
      <div class="context-item" id="contextDelete" style="display: none;">
        <i class="fas fa-trash"></i>
        <span>Excluir</span>
      </div>
      <div class="context-separator" id="contextSeparator3" style="display: none;"></div>
      <div class="context-item" id="contextProperties" style="display: none;">
        <i class="fas fa-cog"></i>
        <span>Propriedades</span>
      </div>
    </div>
    
    <!-- New Folder Dialog -->
    <div class="new-folder-dialog" id="newFolderDialog">
      <div class="dialog-header">
        <div class="dialog-title">Nova Pasta</div>
        <div class="dialog-close" id="newFolderDialogClose">
          <i class="fas fa-times"></i>
        </div>
      </div>
      <div class="dialog-content">
        <input type="text" class="dialog-input" id="newFolderName" placeholder="Nome da pasta" autofocus>
      </div>
      <div class="dialog-actions">
        <button class="dialog-button dialog-cancel" id="newFolderCancel">Cancelar</button>
        <button class="dialog-button dialog-create" id="newFolderCreate">Criar</button>
      </div>
    </div>
    
    <!-- Rename Dialog -->
    <div class="rename-dialog" id="renameDialog">
      <div class="dialog-header">
        <div class="dialog-title">Renomear</div>
        <div class="dialog-close" id="renameDialogClose">
          <i class="fas fa-times"></i>
        </div>
      </div>
      <div class="dialog-content">
        <input type="text" class="dialog-input" id="renameName" placeholder="Novo nome" autofocus>
      </div>
      <div class="dialog-actions">
        <button class="dialog-button dialog-cancel" id="renameCancel">Cancelar</button>
        <button class="dialog-button dialog-create" id="renameConfirm">Renomear</button>
      </div>
    </div>
    
    <!-- Notifications Container -->
    <div class="notifications-container" id="notificationsContainer"></div>
    
    <!-- Voice Assistant -->
    <div class="voice-assistant" id="voiceAssistant">
      <i class="fas fa-microphone"></i>
    </div>
    
    <!-- Voice Assistant Modal -->
    <div class="voice-assistant-modal" id="voiceAssistantModal">
      <div class="voice-assistant-icon">
        <i class="fas fa-microphone"></i>
      </div>
      <div class="voice-assistant-status">Ouvindo...</div>
      <div class="voice-assistant-response" id="voiceResponse">Diga um comando</div>
      <button class="voice-assistant-close" id="voiceAssistantClose">Fechar</button>
    </div>
    
    <!-- Game Mode Indicator -->
    <div class="game-mode" id="gameModeIndicator">
      <i class="fas fa-gamepad"></i>
      <span>MODO GAMER</span>
    </div>
  </div>
  
  <script>
    // Global variables
    let highestZIndex = 1000;
    let systemStartTime = Date.now();
    let gameModeActive = false;
    let voiceAssistantActive = false;
    let selectedCategory = 'all';
    let clipboardData = null;
    let desktopFolders = [];
    let currentContext = 'desktop'; // 'desktop' or 'filemanager'
    let selectedFileItem = null;
    let currentPath = '/Desktop';
    
    // Sistema de arquivos virtual
    const fileSystem = {
      '/': {
        type: 'directory',
        children: {
          'Desktop': {
            type: 'directory',
            children: {}
          },
          'Documents': {
            type: 'directory',
            children: {
              'Trabalho': {
                type: 'directory',
                children: {
                  'Relatório.pdf': {
                    type: 'file',
                    size: '2.4 MB',
                    modified: '2023-10-15'
                  },
                  'Planilha.xlsx': {
                    type: 'file',
                    size: '1.2 MB',
                    modified: '2023-10-10'
                  }
                }
              },
              'Pessoal': {
                type: 'directory',
                children: {
                  'Currículo.pdf': {
                    type: 'file',
                    size: '256 KB',
                    modified: '2023-09-20'
                  }
                }
              }
            }
          },
          'Pictures': {
            type: 'directory',
            children: {
              'Férias': {
                type: 'directory',
                children: {
                  'Foto1.jpg': {
                    type: 'file',
                    size: '3.2 MB',
                    modified: '2023-08-15'
                  },
                  'Foto2.jpg': {
                    type: 'file',
                    size: '2.8 MB',
                    modified: '2023-08-16'
                  }
                }
              },
              'Wallpapers': {
                type: 'directory',
                children: {
                  'VanillaIceOS.jpg': {
                    type: 'file',
                    size: '4.5 MB',
                    modified: '2023-07-01'
                  }
                }
              }
            }
          },
          'Music': {
            type: 'directory',
            children: {
              'Rock': {
                type: 'directory',
                children: {
                  'Música1.mp3': {
                    type: 'file',
                    size: '5.2 MB',
                    modified: '2023-06-10'
                  }
                }
              },
              'Eletrônica': {
                type: 'directory',
                children: {
                  'Música2.mp3': {
                    type: 'file',
                    size: '4.8 MB',
                    modified: '2023-05-20'
                  }
                }
              }
            }
          },
          'Videos': {
            type: 'directory',
            children: {
              'Filmes': {
                type: 'directory',
                children: {
                  'Filme1.mp4': {
                    type: 'file',
                    size: '1.2 GB',
                    modified: '2023-04-15'
                  }
                }
              }
            }
          },
          'Downloads': {
            type: 'directory',
            children: {
              'Arquivo.zip': {
                type: 'file',
                size: '15.6 MB',
                modified: '2023-10-01'
              }
            }
          }
        }
      }
    };
    
    // Terminal commands
    const terminalCommands = {
      help: () => {
        return `Comandos disponíveis:
ls - Lista arquivos e diretórios
cd - Navega entre diretórios
mkdir - Cria um novo diretório
rm - Remove arquivos ou diretórios
pwd - Mostra o diretório atual
echo - Exibe texto
cat - Exibe conteúdo de arquivos
ps - Lista processos em execução
kill - Finaliza processos
df - Mostra espaço em disco
free - Mostra uso de memória
clear - Limpa a tela
exit - Fecha o terminal`;
      },
      ls: (args) => {
        const path = args.length > 0 ? args[0] : currentPath;
        const dir = getDirectory(path);
        
        if (!dir) {
          return `Diretório não encontrado: ${path}`;
        }
        
        if (dir.type !== 'directory') {
          return `${path} não é um diretório`;
        }
        
        const items = Object.keys(dir.children || {});
        return items.join('\n');
      },
      cd: (args) => {
        if (args.length === 0) {
          currentPath = '/Desktop';
          return '';
        }
        
        const targetPath = args[0];
        
        if (targetPath === '..') {
          const pathParts = currentPath.split('/').filter(p => p);
          if (pathParts.length > 1) {
            pathParts.pop();
            currentPath = '/' + pathParts.join('/');
          }
          return '';
        }
        
        if (targetPath.startsWith('/')) {
          const dir = getDirectory(targetPath);
          if (dir && dir.type === 'directory') {
            currentPath = targetPath;
            return '';
          }
          return `Diretório não encontrado: ${targetPath}`;
        }
        
        const newPath = currentPath === '/' ? `/${targetPath}` : `${currentPath}/${targetPath}`;
        const dir = getDirectory(newPath);
        
        if (dir && dir.type === 'directory') {
          currentPath = newPath;
          return '';
        }
        
        return `Diretório não encontrado: ${targetPath}`;
      },
      pwd: () => {
        return currentPath;
      },
      mkdir: (args) => {
        if (args.length === 0) {
          return 'Uso: mkdir <nome-do-diretório>';
        }
        
        const dirName = args[0];
        const parentDir = getDirectory(currentPath);
        
        if (!parentDir) {
          return `Diretório não encontrado: ${currentPath}`;
        }
        
        if (parentDir.children && parentDir.children[dirName]) {
          return `Já existe um arquivo ou diretório com o nome "${dirName}"`;
        }
        
        if (!parentDir.children) {
          parentDir.children = {};
        }
        
        parentDir.children[dirName] = {
          type: 'directory',
          children: {}
        };
        
        return `Diretório "${dirName}" criado com sucesso`;
      },
      rm: (args) => {
        if (args.length === 0) {
          return 'Uso: rm <arquivo-ou-diretório>';
        }
        
        const targetName = args[0];
        const parentDir = getDirectory(currentPath);
        
        if (!parentDir || !parentDir.children || !parentDir.children[targetName]) {
          return `Arquivo ou diretório não encontrado: ${targetName}`;
        }
        
        delete parentDir.children[targetName];
        return `"${targetName}" removido com sucesso`;
      },
      echo: (args) => {
        return args.join(' ');
      },
      cat: (args) => {
        if (args.length === 0) {
          return 'Uso: cat <arquivo>';
        }
        
        const fileName = args[0];
        const parentDir = getDirectory(currentPath);
        
        if (!parentDir || !parentDir.children || !parentDir.children[fileName]) {
          return `Arquivo não encontrado: ${fileName}`;
        }
        
        const file = parentDir.children[fileName];
        
        if (file.type !== 'file') {
          return `${fileName} não é um arquivo`;
        }
        
        // Simular conteúdo do arquivo
        return `Conteúdo do arquivo ${fileName}:
Este é um arquivo de exemplo no VanillaIceOS.
Sistema Operacional Gamer.
Criado em ${file.modified}.`;
      },
      ps: () => {
        return `PID  TTY      TIME     CMD
1    ?        00:00:01 init
2    ?        00:00:00 kthreadd
3    ?        00:00:00 ksoftirqd/0
4    ?        00:00:00 migration/0
5    ?        00:00:00 rcu_gp
100  pts/0    00:00:05 bash
200  pts/0    00:01:10 vanillaiceos
300  ?        00:00:15 chrome`;
      },
      kill: (args) => {
        if (args.length === 0) {
          return 'Uso: kill <PID>';
        }
        
        const pid = args[0];
        return `Processo ${pid} finalizado`;
      },
      df: () => {
        return `Sist. Arq.     Tam. Usado Disp. Uso% Montado em
/dev/sda1      20G  8.5G   11G  44% /
/dev/sdb1      50G   15G   35G  30% /home`;
      },
      free: () => {
        return `              total        usado        livre      compartilhado cache/buffer disponível
Memória:       7.7G        3.2G        4.5G        256M        1.2G        4.0G
Swap:         2.0G          0B        2.0G`;
      },
      clear: () => {
        const terminalContent = document.getElementById('terminalContent');
        terminalContent.innerHTML = `
          <div class="terminal-input-line">
            <span class="terminal-prompt">user@vanillaiceos:~$</span>
            <input type="text" class="terminal-input" id="terminalInput" autofocus>
          </div>
        `;
        document.getElementById('terminalInput').focus();
        return '';
      },
      exit: () => {
        const terminalWindow = document.getElementById('terminal-window');
        if (terminalWindow) {
          terminalWindow.remove();
          removeFromTaskbar('terminal');
        }
        return '';
      }
    };
    
    // Função para obter diretório do sistema de arquivos
    function getDirectory(path) {
      const parts = path.split('/').filter(p => p);
      let current = fileSystem['/'];
      
      for (const part of parts) {
        if (!current.children || !current.children[part]) {
          return null;
        }
        current = current.children[part];
      }
      
      return current;
    }
    
    // Weather API
    const API_KEY = '8ab6ab5a8fd2304942bbffad300520e4';
    const API_BASE_URL = 'https://api.openweathermap.org/data/2.5';
    
    // Sound effects
    const soundEffects = {
      click: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE'),
      notification: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE'),
      error: new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE')
    };
    
    // Loading screen
    window.addEventListener('load', function() {
      setTimeout(() => {
        document.getElementById('loadingScreen').style.opacity = '0';
        setTimeout(() => {
          document.getElementById('loadingScreen').style.display = 'none';
          initializeSystem();
        }, 500);
      }, 3000);
    });
    
    // Initialize system
    function initializeSystem() {
      createParticles();
      createMatrixRain();
      updateDateTime();
      updateClockWidget();
      getWeatherData();
      setInterval(updateDateTime, 60000);
      setInterval(updateClockWidget, 1000);
      setInterval(getWeatherData, 600000); // Update weather every 10 minutes
      
      // Set initial brightness and volume
      updateBrightness(70);
      updateVolume(50);
      
      // Show welcome notification
      showNotification('Bem-vindo ao VanillaIceOS', 'Sistema operacional gamer carregado com sucesso!', 'success');
      
      // Initialize keyboard shortcuts
      initializeKeyboardShortcuts();
      
      // Initialize touch gestures
      initializeTouchGestures();
      
      // Load desktop folders from localStorage
      loadDesktopFolders();
    }
    
    // Create RGB particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const colors = ['#ff006e', '#00ff88', '#00d9ff', '#bf00ff', '#ff0080'];
      
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        particle.style.animationDelay = Math.random() * 20 + 's';
        particle.style.animationDuration = (15 + Math.random() * 10) + 's';
        particlesContainer.appendChild(particle);
      }
    }
    
    // Create Matrix rain effect
    function createMatrixRain() {
      const matrixContainer = document.getElementById('matrixRain');
      const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()';
      
      for (let i = 0; i < 20; i++) {
        const column = document.createElement('div');
        column.className = 'matrix-column';
        column.style.left = Math.random() * 100 + '%';
        column.style.animationDuration = (5 + Math.random() * 10) + 's';
        column.style.animationDelay = Math.random() * 5 + 's';
        
        let text = '';
        for (let j = 0; j < 20; j++) {
          text += characters.charAt(Math.floor(Math.random() * characters.length)) + '<br>';
        }
        column.innerHTML = text;
        
        matrixContainer.appendChild(column);
      }
    }
    
    // Update date and time
    function updateDateTime() {
      const now = new Date();
      
      // Format time
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      
      // Format date
      const days = ['dom', 'seg', 'ter', 'qua', 'qui', 'sex', 'sáb'];
      const dayName = days[now.getDay()];
      const day = now.getDate();
      const months = ['jan', 'fev', 'mar', 'abr', 'mai', 'jun', 'jul', 'ago', 'set', 'out', 'nov', 'dez'];
      const month = months[now.getMonth()];
      
      document.querySelector('.time').textContent = `${hours}:${minutes}`;
      document.querySelector('.date').textContent = `${dayName} ${day} ${month}`;
    }
    
    // Update clock widget
    function updateClockWidget() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');
      
      document.getElementById('clockTime').textContent = `${hours}:${minutes}:${seconds}`;
      
      const days = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];
      const dayName = days[now.getDay()];
      const day = now.getDate();
      const months = ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'];
      const month = months[now.getMonth()];
      
      document.getElementById('clockDate').textContent = `${dayName} ${day} ${month}`;
    }
    
    // Get weather data from API
    function getWeatherData() {
      // Get user's location
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          position => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            
            // Fetch weather data
            fetch(`${API_BASE_URL}/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=pt_br`)
              .then(response => response.json())
              .then(data => {
                updateWeatherWidget(data);
              })
              .catch(error => {
                console.error('Error fetching weather data:', error);
                // Use default weather data if API fails
                updateWeatherWidget({
                  name: 'Sua Cidade',
                  main: { temp: 25 },
                  weather: [{ description: 'Ensolarado' }],
                  main: { humidity: 65 },
                  wind: { speed: 12 },
                  main: { pressure: 1013 }
                });
              });
          },
          error => {
            console.error('Error getting location:', error);
            // Use default weather data if location fails
            updateWeatherWidget({
              name: 'Sua Cidade',
              main: { temp: 25 },
              weather: [{ description: 'Ensolarado' }],
              main: { humidity: 65 },
              wind: { speed: 12 },
              main: { pressure: 1013 }
            });
          }
        );
      } else {
        console.error('Geolocation is not supported by this browser.');
        // Use default weather data if geolocation is not supported
        updateWeatherWidget({
          name: 'Sua Cidade',
          main: { temp: 25 },
          weather: [{ description: 'Ensolarado' }],
          main: { humidity: 65 },
          wind: { speed: 12 },
          main: { pressure: 1013 }
        });
      }
    }
    
    // Update weather widget with data
    function updateWeatherWidget(data) {
      const temp = Math.round(data.main.temp);
      const description = data.weather[0].description;
      const humidity = data.main.humidity;
      const windSpeed = Math.round(data.wind.speed);
      const pressure = data.main.pressure;
      
      // Update weather icon based on description
      let weatherIcon = 'fas fa-sun';
      if (description.includes('nuvem') || description.includes('cloud')) {
        weatherIcon = 'fas fa-cloud';
      } else if (description.includes('chuva') || description.includes('rain')) {
        weatherIcon = 'fas fa-cloud-rain';
      } else if (description.includes('tempestade') || description.includes('storm')) {
        weatherIcon = 'fas fa-bolt';
      } else if (description.includes('neve') || description.includes('snow')) {
        weatherIcon = 'fas fa-snowflake';
      } else if (description.includes('névoa') || description.includes('fog') || description.includes('mist')) {
        weatherIcon = 'fas fa-smog';
      }
      
      // Update widget elements
      document.querySelector('.weather-icon').className = `${weatherIcon} weather-icon`;
      document.querySelector('.weather-temp').textContent = `${temp}°C`;
      document.querySelector('.weather-desc').textContent = description.charAt(0).toUpperCase() + description.slice(1);
      document.querySelector('.weather-detail-value').textContent = `${humidity}%`;
      document.querySelectorAll('.weather-detail-value')[1].textContent = `${windSpeed}km/h`;
      document.querySelectorAll('.weather-detail-value')[2].textContent = `${pressure}mb`;
    }
    
    // Update system info
    function updateSystemInfo() {
      // Browser info
      const browserInfo = document.getElementById('browserInfo');
      const userAgent = navigator.userAgent;
      let browserName = "Unknown";
      let browserVersion = "";
      
      if (userAgent.indexOf("Chrome") > -1) {
        browserName = "Chrome";
        browserVersion = userAgent.match(/Chrome\/(\d+\.\d+)/)[1];
      } else if (userAgent.indexOf("Safari") > -1 && userAgent.indexOf("Chrome") === -1) {
        browserName = "Safari";
        browserVersion = userAgent.match(/Version\/(\d+\.\d+)/)[1];
      } else if (userAgent.indexOf("Firefox") > -1) {
        browserName = "Firefox";
        browserVersion = userAgent.match(/Firefox\/(\d+\.\d+)/)[1];
      } else if (userAgent.indexOf("MSIE") > -1 || userAgent.indexOf("Trident") > -1) {
        browserName = "Internet Explorer";
        browserVersion = userAgent.match(/(?:MSIE |rv:)(\d+\.\d+)/)[1];
      } else if (userAgent.indexOf("Edge") > -1) {
        browserName = "Edge";
        browserVersion = userAgent.match(/Edge\/(\d+\.\d+)/)[1];
      }
      
      browserInfo.textContent = browserName + (browserVersion ? " v" + browserVersion : "");
      
      // Resolution info
      const resolutionInfo = document.getElementById('resolutionInfo');
      resolutionInfo.textContent = `${window.screen.width} × ${window.screen.height}`;
      
      // Memory info (approximation)
      const memoryInfo = document.getElementById('memoryInfo');
      if (navigator.deviceMemory) {
        memoryInfo.textContent = `${navigator.deviceMemory} GB`;
      } else {
        // Try to get memory info from performance API
        if (performance.memory) {
          const memoryInGB = (performance.memory.jsHeapSizeLimit / (1024 * 1024 * 1024)).toFixed(1);
          memoryInfo.textContent = `${memoryInGB} GB`;
        } else {
          memoryInfo.textContent = "Não disponível";
        }
      }
      
      // CPU info
      const cpuInfo = document.getElementById('cpuInfo');
      if (navigator.hardwareConcurrency) {
        cpuInfo.textContent = `${navigator.hardwareConcurrency} núcleos`;
      } else {
        cpuInfo.textContent = "Não disponível";
      }
      
      // System architecture
      const systemArch = document.getElementById('systemArch');
      if (navigator.platform) {
        systemArch.textContent = navigator.platform.includes('64') ? 'x64' : 'x86';
      }
      
      // Uptime info
      const uptimeInfo = document.getElementById('uptimeInfo');
      const uptime = Date.now() - systemStartTime;
      const seconds = Math.floor(uptime / 1000) % 60;
      const minutes = Math.floor(uptime / (1000 * 60)) % 60;
      const hours = Math.floor(uptime / (1000 * 60 * 60));
      
      uptimeInfo.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
    }
    
    // Show notification
    function showNotification(title, message, type = 'info') {
      const container = document.getElementById('notificationsContainer');
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      
      notification.innerHTML = `
        <div class="notification-header">
          <div class="notification-title">${title}</div>
          <div class="notification-close">
            <i class="fas fa-times"></i>
          </div>
        </div>
        <div class="notification-content">${message}</div>
      `;
      
      container.appendChild(notification);
      
      // Play sound effect
      if (type === 'error') {
        soundEffects.error.play();
      } else if (type === 'success') {
        soundEffects.notification.play();
      }
      
      // Auto remove after 5 seconds
      setTimeout(() => {
        notification.style.animation = 'slideInRight 0.3s ease-out reverse';
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 5000);
      
      // Close button
      notification.querySelector('.notification-close').addEventListener('click', function() {
        notification.style.animation = 'slideInRight 0.3s ease-out reverse';
        setTimeout(() => {
          notification.remove();
        }, 300);
      });
    }
    
    // Initialize keyboard shortcuts
    function initializeKeyboardShortcuts() {
      document.addEventListener('keydown', function(e) {
        // Ctrl + Alt + Delete: Open task manager
        if (e.ctrlKey && e.altKey && e.key === 'Delete') {
          e.preventDefault();
          showNotification('Gerenciador de Tarefas', 'Esta função será implementada em breve', 'info');
        }
        
        // Win + D: Show desktop
        if (e.metaKey || e.ctrlKey) {
          if (e.key === 'd' || e.key === 'D') {
            e.preventDefault();
            minimizeAllWindows();
          }
        }
        
        // Win + S: Open search
        if (e.metaKey || e.ctrlKey) {
          if (e.key === 's' || e.key === 'S') {
            e.preventDefault();
            document.getElementById('searchBar').focus();
          }
        }
        
        // Win + I: Open settings
        if (e.metaKey || e.ctrlKey) {
          if (e.key === 'i' || e.key === 'I') {
            e.preventDefault();
            settingsPanel.classList.toggle('active');
          }
        }
        
        // F11: Toggle fullscreen
        if (e.key === 'F11') {
          e.preventDefault();
          toggleFullscreen();
        }
        
        // Ctrl + C: Copy
        if (e.ctrlKey && e.key === 'c') {
          if (selectedFileItem) {
            e.preventDefault();
            copyFileItem(selectedFileItem);
          }
        }
        
        // Ctrl + V: Paste
        if (e.ctrlKey && e.key === 'v') {
          if (clipboardData) {
            e.preventDefault();
            pasteFileItem();
          }
        }
        
        // Delete: Delete selected item
        if (e.key === 'Delete') {
          if (selectedFileItem) {
            e.preventDefault();
            deleteFileItem(selectedFileItem);
          }
        }
        
        // F2: Rename selected item
        if (e.key === 'F2') {
          if (selectedFileItem) {
            e.preventDefault();
            renameFileItem(selectedFileItem);
          }
        }
      });
    }
    
    // Initialize touch gestures
    function initializeTouchGestures() {
      let touchStartX = 0;
      let touchStartY = 0;
      
      document.addEventListener('touchstart', function(e) {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
      });
      
      document.addEventListener('touchend', function(e) {
        const touchEndX = e.changedTouches[0].clientX;
        const touchEndY = e.changedTouches[0].clientY;
        const deltaX = touchEndX - touchStartX;
        const deltaY = touchEndY - touchStartY;
        
        // Swipe up from bottom: Open start menu
        if (deltaY < -50 && Math.abs(deltaX) < 50) {
          startMenu.classList.add('active');
        }
        
        // Swipe down from top: Open notifications
        if (deltaY > 50 && Math.abs(deltaX) < 50) {
          showNotification('Notificações', 'Você tem 3 novas notificações', 'info');
        }
      });
    }
    
    // Minimize all windows
    function minimizeAllWindows() {
      const windows = document.querySelectorAll('.app-window.active');
      windows.forEach(window => {
        window.classList.remove('active');
        const appId = window.id.replace('-window', '');
        updateTaskbarAppStatus(appId, false);
      });
    }
    
    // Toggle fullscreen
    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        }
      }
    }
    
    // Start menu toggle
    const startButton = document.getElementById('startButton');
    const startMenu = document.getElementById('startMenu');
    
    startButton.addEventListener('click', function() {
      playSound('click');
      startMenu.classList.toggle('active');
      // Close other panels
      wifiMenu.classList.remove('active');
      settingsPanel.classList.remove('active');
    });
    
    // Settings panel
    const settingsButton = document.getElementById('settingsButton');
    const settingsPanel = document.getElementById('settingsPanel');
    const settingsClose = document.getElementById('settingsClose');
    
    settingsButton.addEventListener('click', function() {
      playSound('click');
      settingsPanel.classList.toggle('active');
      // Close other panels
      startMenu.classList.remove('active');
      wifiMenu.classList.remove('active');
      
      // Update settings values
      updateSettingsValues();
      updateSystemInfo();
    });
    
    settingsClose.addEventListener('click', function() {
      playSound('click');
      settingsPanel.classList.remove('active');
    });
    
    // Settings tabs
    const settingsTabs = document.querySelectorAll('.settings-tab');
    const settingsContents = document.querySelectorAll('.settings-content');
    
    settingsTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        playSound('click');
        const tabId = this.getAttribute('data-tab');
        
        // Remove active class from all tabs and contents
        settingsTabs.forEach(t => t.classList.remove('active'));
        settingsContents.forEach(c => c.classList.remove('active'));
        
        // Add active class to selected tab and content
        this.classList.add('active');
        document.getElementById(tabId).classList.add('active');
      });
    });
    
    // Update settings values
    function updateSettingsValues() {
      // Brightness
      const brightnessSlider = document.getElementById('brightnessSlider');
      const brightnessLevel = brightnessSlider.querySelector('.brightness-level');
      const brightnessHandle = brightnessSlider.querySelector('.brightness-handle');
      const brightnessValue = parseInt(brightnessLevel.style.width) || 70;
      
      const settingsBrightnessSlider = document.getElementById('settingsBrightnessSlider');
      const settingsBrightnessLevel = settingsBrightnessSlider.querySelector('.settings-slider-level');
      const settingsBrightnessHandle = settingsBrightnessSlider.querySelector('.settings-slider-handle');
      const settingsBrightnessValue = document.getElementById('settingsBrightnessValue');
      
      settingsBrightnessLevel.style.width = brightnessValue + '%';
      settingsBrightnessHandle.style.left = brightnessValue + '%';
      settingsBrightnessValue.textContent = brightnessValue + '%';
      
      // Volume
      const volumeSlider = document.getElementById('volumeSlider');
      const volumeLevel = volumeSlider.querySelector('.volume-level');
      const volumeHandle = volumeSlider.querySelector('.volume-handle');
      const volumeValue = parseInt(volumeLevel.style.width) || 50;
      
      const settingsVolumeSlider = document.getElementById('settingsVolumeSlider');
      const settingsVolumeLevel = settingsVolumeSlider.querySelector('.settings-slider-level');
      const settingsVolumeHandle = settingsVolumeSlider.querySelector('.settings-slider-handle');
      const settingsVolumeValue = document.getElementById('settingsVolumeValue');
      
      settingsVolumeLevel.style.width = volumeValue + '%';
      settingsVolumeHandle.style.left = volumeValue + '%';
      settingsVolumeValue.textContent = volumeValue + '%';
    }
    
    // Settings brightness control
    const settingsBrightnessSlider = document.getElementById('settingsBrightnessSlider');
    const settingsBrightnessLevel = settingsBrightnessSlider.querySelector('.settings-slider-level');
    const settingsBrightnessHandle = settingsBrightnessSlider.querySelector('.settings-slider-handle');
    const settingsBrightnessValue = document.getElementById('settingsBrightnessValue');
    
    let isDraggingSettingsBrightness = false;
    
    function updateSettingsBrightness(percentage) {
      settingsBrightnessLevel.style.width = percentage + '%';
      settingsBrightnessHandle.style.left = percentage + '%';
      settingsBrightnessValue.textContent = Math.round(percentage) + '%';
      
      // Update main brightness
      updateBrightness(percentage);
    }
    
    settingsBrightnessSlider.addEventListener('mousedown', function(e) {
      isDraggingSettingsBrightness = true;
      updateSettingsBrightnessFromEvent(e);
    });
    
    document.addEventListener('mousemove', function(e) {
      if (isDraggingSettingsBrightness) {
        updateSettingsBrightnessFromEvent(e);
      }
    });
    
    document.addEventListener('mouseup', function() {
      isDraggingSettingsBrightness = false;
    });
    
    function updateSettingsBrightnessFromEvent(e) {
      const rect = settingsBrightnessSlider.getBoundingClientRect();
      const percentage = Math.max(0, Math.min(100, ((e.clientX - rect.left) / rect.width) * 100));
      updateSettingsBrightness(percentage);
    }
    
    // Settings volume control
    const settingsVolumeSlider = document.getElementById('settingsVolumeSlider');
    const settingsVolumeLevel = settingsVolumeSlider.querySelector('.settings-slider-level');
    const settingsVolumeHandle = settingsVolumeSlider.querySelector('.settings-slider-handle');
    const settingsVolumeValue = document.getElementById('settingsVolumeValue');
    
    let isDraggingSettingsVolume = false;
    
    function updateSettingsVolume(percentage) {
      settingsVolumeLevel.style.width = percentage + '%';
      settingsVolumeHandle.style.left = percentage + '%';
      settingsVolumeValue.textContent = Math.round(percentage) + '%';
      
      // Update main volume
      updateVolume(percentage);
    }
    
    settingsVolumeSlider.addEventListener('mousedown', function(e) {
      isDraggingSettingsVolume = true;
      updateSettingsVolumeFromEvent(e);
    });
    
    document.addEventListener('mousemove', function(e) {
      if (isDraggingSettingsVolume) {
        updateSettingsVolumeFromEvent(e);
      }
    });
    
    document.addEventListener('mouseup', function() {
      isDraggingSettingsVolume = false;
    });
    
    function updateSettingsVolumeFromEvent(e) {
      const rect = settingsVolumeSlider.getBoundingClientRect();
      const percentage = Math.max(0, Math.min(100, ((e.clientX - rect.left) / rect.width) * 100));
      updateSettingsVolume(percentage);
    }
    
    // Background selection
    const backgroundSelect = document.getElementById('backgroundSelect');
    const wallpaperUploadItem = document.getElementById('wallpaperUploadItem');
    
    backgroundSelect.addEventListener('change', function() {
      playSound('click');
      const selectedBackground = this.value;
      
      // Show/hide wallpaper upload based on selection
      if (selectedBackground === 'custom') {
        wallpaperUploadItem.style.display = 'flex';
      } else {
        wallpaperUploadItem.style.display = 'none';
        applyBackground(selectedBackground);
      }
    });
    
    // Apply background
    function applyBackground(backgroundType) {
      switch(backgroundType) {
        case 'default':
          document.body.style.background = 'linear-gradient(135deg, #0f0c29, #302b63, #24243e)';
          break;
        case 'dark':
          document.body.style.background = 'linear-gradient(135deg, #000000, #1a1a2e, #16213e)';
          break;
        case 'matrix':
          document.body.style.background = 'linear-gradient(135deg, #000000, #0f3443, #34e89e)';
          break;
        case 'nebula':
          document.body.style.background = 'linear-gradient(135deg, #1a1a2e, #16213e, #0f3460)';
          break;
        case 'cyber':
          document.body.style.background = 'linear-gradient(135deg, #0f0c29, #302b63, #24243e)';
          break;
      }
    }
    
    // Wallpaper upload
    const wallpaperUploadButton = document.getElementById('wallpaperUploadButton');
    const wallpaperInput = document.getElementById('wallpaperInput');
    const wallpaperPreview = document.getElementById('wallpaperPreview');
    
    wallpaperUploadButton.addEventListener('click', function() {
      playSound('click');
      wallpaperInput.click();
    });
    
    wallpaperInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        
        reader.onload = function(event) {
          const imageUrl = event.target.result;
          
          // Update preview
          wallpaperPreview.innerHTML = `<img src="${imageUrl}" alt="Wallpaper preview">`;
          
          // Apply as background
          document.body.style.backgroundImage = `url(${imageUrl})`;
          document.body.style.backgroundSize = 'cover';
          document.body.style.backgroundPosition = 'center';
          document.body.style.backgroundRepeat = 'no-repeat';
        };
        
        reader.readAsDataURL(file);
      }
    });
    
    // Theme color selection
    const themeColors = document.querySelectorAll('.settings-color');
    
    themeColors.forEach(color => {
      color.addEventListener('click', function() {
        playSound('click');
        // Remove active class from all colors
        themeColors.forEach(c => c.classList.remove('active'));
        
        // Add active class to selected color
        this.classList.add('active');
        
        // Apply theme based on data attribute
        const theme = this.getAttribute('data-theme');
        
        switch(theme) {
          case 'default':
            document.documentElement.style.setProperty('--primary', '#6366f1');
            document.documentElement.style.setProperty('--secondary', '#8b5cf6');
            document.documentElement.style.setProperty('--accent', '#ec4899');
            break;
          case 'rgb':
            document.documentElement.style.setProperty('--primary', '#00d9ff');
            document.documentElement.style.setProperty('--secondary', '#00ff88');
            document.documentElement.style.setProperty('--accent', '#ff006e');
            break;
          case 'fire':
            document.documentElement.style.setProperty('--primary', '#ff9a00');
            document.documentElement.style.setProperty('--secondary', '#ff0000');
            document.documentElement.style.setProperty('--accent', '#ff00ff');
            break;
          case 'nature':
            document.documentElement.style.setProperty('--primary', '#00ff88');
            document.documentElement.style.setProperty('--secondary', '#00d9ff');
            document.documentElement.style.setProperty('--accent', '#bf00ff');
            break;
          case 'sunset':
            document.documentElement.style.setProperty('--primary', '#ffeb3b');
            document.documentElement.style.setProperty('--secondary', '#ff9800');
            document.documentElement.style.setProperty('--accent', '#f44336');
            break;
        }
      });
    });
    
    // Effects toggles
    const particlesToggle = document.getElementById('particlesToggle');
    const matrixToggle = document.getElementById('matrixToggle');
    const glitchToggle = document.getElementById('glitchToggle');
    const animationsToggle = document.getElementById('animationsToggle');
    const soundEffectsToggle = document.getElementById('soundEffectsToggle');
    
    particlesToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      const rgbParticles = document.querySelector('.rgb-particles');
      
      if (isActive) {
        rgbParticles.style.display = 'block';
      } else {
        rgbParticles.style.display = 'none';
      }
    });
    
    matrixToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      const matrixRain = document.querySelector('.matrix-rain');
      
      if (isActive) {
        matrixRain.style.display = 'block';
      } else {
        matrixRain.style.display = 'none';
      }
    });
    
    glitchToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      const glitchOverlay = document.getElementById('glitchOverlay');
      
      if (isActive) {
        glitchOverlay.classList.add('active');
      } else {
        glitchOverlay.classList.remove('active');
      }
    });
    
    animationsToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        document.body.style.setProperty('--animation-duration', '0.3s');
      } else {
        document.body.style.setProperty('--animation-duration', '0s');
      }
    });
    
    soundEffectsToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
    });
    
    // Text size selection
    const textSizeSelect = document.getElementById('textSizeSelect');
    
    textSizeSelect.addEventListener('change', function() {
      playSound('click');
      const textSize = this.value;
      
      switch(textSize) {
        case 'small':
          document.documentElement.style.fontSize = '14px';
          break;
        case 'medium':
          document.documentElement.style.fontSize = '16px';
          break;
        case 'large':
          document.documentElement.style.fontSize = '18px';
          break;
        case 'xlarge':
          document.documentElement.style.fontSize = '20px';
          break;
      }
    });
    
    // High contrast toggle
    const highContrastToggle = document.getElementById('highContrastToggle');
    
    highContrastToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        document.documentElement.style.setProperty('--light', '#ffffff');
        document.documentElement.style.setProperty('--gray', '#cccccc');
      } else {
        document.documentElement.style.setProperty('--light', '#e2e8f0');
        document.documentElement.style.setProperty('--gray', '#64748b');
      }
    });
    
    // Resolution selection
    const resolutionSelect = document.getElementById('resolutionSelect');
    
    resolutionSelect.addEventListener('change', function() {
      playSound('click');
      const resolution = this.value;
      
      if (resolution !== 'auto') {
        const [width, height] = resolution.split('x');
        
        if (screen.width >= parseInt(width) && screen.height >= parseInt(height)) {
          // In a real implementation, this would change the screen resolution
          showNotification('Resolução', `Resolução alterada para ${width}×${height}`, 'success');
        } else {
          showNotification('Resolução', `Resolução ${width}×${height} não suportada`, 'error');
          this.value = 'auto';
        }
      }
    });
    
    // Refresh rate selection
    const refreshRateSelect = document.getElementById('refreshRateSelect');
    
    refreshRateSelect.addEventListener('change', function() {
      playSound('click');
      const refreshRate = this.value;
      
      // In a real implementation, this would change the screen refresh rate
      showNotification('Taxa de Atualização', `Taxa de atualização alterada para ${refreshRate} Hz`, 'success');
    });
    
    // Audio device selection
    const audioDeviceSelect = document.getElementById('audioDeviceSelect');
    
    audioDeviceSelect.addEventListener('change', function() {
      playSound('click');
      const device = this.value;
      
      // In a real implementation, this would change the audio output device
      showNotification('Dispositivo de Áudio', `Dispositivo alterado para ${device === 'default' ? 'Alto-falantes' : device === 'headphones' ? 'Fones de Ouvido' : 'Bluetooth'}`, 'success');
    });
    
    // WiFi settings toggle
    const wifiSettingsToggle = document.getElementById('wifiSettingsToggle');
    
    wifiSettingsToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Wi-Fi', 'Wi-Fi ativado', 'success');
      } else {
        showNotification('Wi-Fi', 'Wi-Fi desativado', 'info');
      }
    });
    
    // VPN toggle
    const vpnToggle = document.getElementById('vpnToggle');
    
    vpnToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('VPN', 'VPN ativada', 'success');
      } else {
        showNotification('VPN', 'VPN desativada', 'info');
      }
    });
    
    // Proxy selection
    const proxySelect = document.getElementById('proxySelect');
    
    proxySelect.addEventListener('change', function() {
      playSound('click');
      const proxy = this.value;
      
      // In a real implementation, this would configure the proxy settings
      showNotification('Proxy', `Configuração de proxy alterada para ${proxy === 'none' ? 'Nenhum' : proxy === 'auto' ? 'Detectar automaticamente' : 'Configurar manualmente'}`, 'success');
    });
    
    // Game mode
    const gameModeEnable = document.getElementById('gameModeEnable');
    const gameModeIndicator = document.getElementById('gameModeIndicator');
    
    gameModeEnable.addEventListener('click', function() {
      playSound('click');
      gameModeActive = !gameModeActive;
      
      if (gameModeActive) {
        gameModeIndicator.classList.add('active');
        gameModeEnable.textContent = 'Desativar Modo Gamer';
        showNotification('Modo Gamer Ativado', 'Sistema otimizado para máxima performance!', 'success');
        
        // Optimize system for gaming
        document.body.style.filter = 'contrast(1.1) saturate(1.2)';
        document.querySelector('.rgb-particles').style.display = 'none';
        document.querySelector('.matrix-rain').style.display = 'none';
      } else {
        gameModeIndicator.classList.remove('active');
        gameModeEnable.textContent = 'Ativar Modo Gamer';
        showNotification('Modo Gamer Desativado', 'Configurações restauradas', 'info');
        
        // Restore normal settings
        document.body.style.filter = '';
        if (particlesToggle.classList.contains('active')) {
          document.querySelector('.rgb-particles').style.display = 'block';
        }
        if (matrixToggle.classList.contains('active')) {
          document.querySelector('.matrix-rain').style.display = 'block';
        }
      }
    });
    
    // Game bar toggle
    const gameBarToggle = document.getElementById('gameBarToggle');
    
    gameBarToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Game Bar', 'Game Bar ativada', 'success');
      } else {
        showNotification('Game Bar', 'Game Bar desativada', 'info');
      }
    });
    
    // Game recording toggle
    const gameRecordingToggle = document.getElementById('gameRecordingToggle');
    
    gameRecordingToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Gravação de Jogos', 'Gravação de jogos ativada', 'success');
      } else {
        showNotification('Gravação de Jogos', 'Gravação de jogos desativada', 'info');
      }
    });
    
    // Borderless toggle
    const borderlessToggle = document.getElementById('borderlessToggle');
    
    borderlessToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Modo Janela Sem Borda', 'Modo janela sem borda ativado', 'success');
      } else {
        showNotification('Modo Janela Sem Borda', 'Modo janela sem borda desativado', 'info');
      }
    });
    
    // Data collection toggle
    const dataCollectionToggle = document.getElementById('dataCollectionToggle');
    
    dataCollectionToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Coleta de Dados', 'Coleta de dados ativada', 'success');
      } else {
        showNotification('Coleta de Dados', 'Coleta de dados desativada', 'info');
      }
    });
    
    // Location toggle
    const locationToggle = document.getElementById('locationToggle');
    
    locationToggle.addEventListener('click', function() {
      playSound('click');
      this.classList.toggle('active');
      
      const isActive = this.classList.contains('active');
      
      if (isActive) {
        showNotification('Localização', 'Localização ativada', 'success');
        getWeatherData(); // Refresh weather data with location
      } else {
        showNotification('Localização', 'Localização desativada', 'info');
      }
    });
    
    // Power options
    const shutdownOption = document.getElementById('shutdownOption');
    const restartOption = document.getElementById('restartOption');
    const sleepOption = document.getElementById('sleepOption');
    const lockOption = document.getElementById('lockOption');
    
    shutdownOption.addEventListener('click', function() {
      playSound('click');
      if (confirm('Deseja desligar o sistema?')) {
        showNotification('Desligando', 'O sistema será desligado em breve...', 'info');
        setTimeout(() => {
          window.close();
        }, 2000);
      }
      startMenu.classList.remove('active');
    });
    
    restartOption.addEventListener('click', function() {
      playSound('click');
      if (confirm('Deseja reiniciar o sistema?')) {
        showNotification('Reiniciando', 'O sistema será reiniciado em breve...', 'info');
        setTimeout(() => {
          location.reload();
        }, 2000);
      }
      startMenu.classList.remove('active');
    });
    
    sleepOption.addEventListener('click', function() {
      playSound('click');
      showNotification('Suspenso', 'Sistema em modo de suspensão', 'info');
      startMenu.classList.remove('active');
    });
    
    lockOption.addEventListener('click', function() {
      playSound('click');
      showNotification('Bloqueado', 'Sistema bloqueado', 'info');
      startMenu.classList.remove('active');
    });
    
    // Start menu categories
    const categoryTabs = document.querySelectorAll('.category-tab');
    const startMenuApps = document.getElementById('startMenuApps');
    const allApps = startMenuApps.querySelectorAll('.start-app');
    
    categoryTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        playSound('click');
        const category = this.getAttribute('data-category');
        selectedCategory = category;
        
        // Remove active class from all tabs
        categoryTabs.forEach(t => t.classList.remove('active'));
        
        // Add active class to selected tab
        this.classList.add('active');
        
        // Filter apps
        filterApps();
      });
    });
    
    // Filter apps by category
    function filterApps() {
      allApps.forEach(app => {
        const appCategory = app.getAttribute('data-category');
        
        if (selectedCategory === 'all' || appCategory === selectedCategory) {
          app.style.display = 'flex';
        } else {
          app.style.display = 'none';
        }
      });
    }
    
    // Desktop icons
    const desktopIcons = document.querySelectorAll('.desktop-icon');
    
    desktopIcons.forEach(icon => {
      icon.addEventListener('dblclick', function() {
        playSound('click');
        const appId = this.getAttribute('data-app');
        const appTitle = this.getAttribute('data-title');
        const appIcon = this.getAttribute('data-icon');
        const appPath = this.getAttribute('data-path');
        
        openApp(appId, appTitle, appIcon, appPath);
      });
      
      icon.addEventListener('click', function(e) {
        // Remove selected class from all icons and folders
        document.querySelectorAll('.desktop-icon, .desktop-folder').forEach(i => i.classList.remove('selected'));
        
        // Add selected class to clicked icon
        this.classList.add('selected');
      });
    });
    
    // App opening function
    function openApp(appId, appTitle, appIcon, appPath) {
      // Check if window already exists
      let appWindow = document.getElementById(`${appId}-window`);
      
      if (!appWindow) {
        // Create window if it doesn't exist
        appWindow = document.createElement('div');
        appWindow.id = `${appId}-window`;
        appWindow.className = 'app-window active';
        appWindow.style.top = '50px';
        appWindow.style.left = '50px';
        appWindow.style.width = '800px';
        appWindow.style.height = '600px';
        appWindow.style.zIndex = ++highestZIndex;
        
        // Special handling for different app types
        let windowContent = '';
        
        switch(appId) {
          case 'terminal':
            windowContent = createTerminalWindow();
            break;
          case 'filemanager':
            windowContent = createFileManagerWindow();
            break;
          case 'gamecenter':
            windowContent = createGameCenterWindow();
            break;
          case 'mediaplayer':
            windowContent = createMediaPlayerWindow();
            break;
          case 'about':
            // Open the about page in a new window
            window.open(appPath, '_blank');
            showNotification(appTitle, 'Página aberta em nova janela', 'success');
            return;
          default:
            windowContent = `<div class="window-content">
              <iframe src="${appPath}" frameborder="0"></iframe>
            </div>`;
        }
        
        appWindow.innerHTML = `
          <div class="window-header">
            <div class="window-title">
              <i class="${appIcon}"></i>
              ${appTitle}
            </div>
            <div class="window-controls">
              <button class="window-control minimize"><i class="fas fa-minus"></i></button>
              <button class="window-control maximize"><i class="fas fa-expand"></i></button>
              <button class="window-control close"><i class="fas fa-times"></i></button>
            </div>
          </div>
          ${windowContent}
          
          <!-- Resize handles -->
          <div class="resize-handle resize-handle-top"></div>
          <div class="resize-handle resize-handle-right"></div>
          <div class="resize-handle resize-handle-bottom"></div>
          <div class="resize-handle resize-handle-left"></div>
          <div class="resize-handle resize-handle-top-right"></div>
          <div class="resize-handle resize-handle-bottom-right"></div>
          <div class="resize-handle resize-handle-bottom-left"></div>
          <div class="resize-handle resize-handle-top-left"></div>
        `;
        
        // Add to desktop
        document.getElementById('desktopContent').appendChild(appWindow);
        
        // Make window draggable
        makeWindowDraggable(appWindow);
        
        // Make window resizable
        makeWindowResizable(appWindow);
        
        // Add events to controls
        setupWindowControls(appWindow);
        
        // Add to taskbar
        addToTaskbar(appId, appIcon, appTitle);
        
        // Close start menu
        startMenu.classList.remove('active');
        
        // Play launch sound
        playSound('notification');
        
        // Show notification
        showNotification(appTitle, 'Aplicativo aberto com sucesso!', 'success');
        
        // Initialize file manager if opened
        if (appId === 'filemanager') {
          initializeFileManager(appWindow);
        }
        
        // Initialize media player if opened
        if (appId === 'mediaplayer') {
          initializeMediaPlayer(appWindow);
        }
      } else {
        // If already exists, bring to front and toggle visibility
        bringWindowToFront(appWindow);
        
        if (appWindow.classList.contains('active')) {
          appWindow.classList.remove('active');
          updateTaskbarAppStatus(appId, false);
        } else {
          appWindow.classList.add('active');
          updateTaskbarAppStatus(appId, true);
        }
      }
    }
    
    // Create terminal window
    function createTerminalWindow() {
      return `
        <div class="window-content">
          <div class="terminal-window">
            <div class="terminal-header">
              <div class="terminal-title">VanillaIceOS Terminal v2.0</div>
            </div>
            <div class="terminal-content" id="terminalContent">
              <div class="terminal-line">
                <span class="terminal-prompt">user@vanillaiceos:~$</span>
                <span class="terminal-command">welcome</span>
              </div>
              <div class="terminal-output">Bem-vindo ao VanillaIceOS Terminal!</div>
              <div class="terminal-line">
                <span class="terminal-prompt">user@vanillaiceos:~$</span>
                <span class="terminal-command">help</span>
              </div>
              <div class="terminal-output">Comandos disponíveis: help, clear, date, uptime, sysinfo, exit</div>
              <div class="terminal-input-line">
                <span class="terminal-prompt">user@vanillaiceos:~$</span>
                <input type="text" class="terminal-input" id="terminalInput" autofocus>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Create file manager window
    function createFileManagerWindow() {
      return `
        <div class="window-content">
          <div class="file-manager">
            <div class="file-manager-header">
              <div class="file-path">
                <i class="fas fa-home"></i>
                <span class="file-path-separator">/</span>
                <span>Desktop</span>
              </div>
              <div class="file-actions">
                <div class="file-action-button" title="Nova Pasta">
                  <i class="fas fa-folder-plus"></i>
                </div>
                <div class="file-action-button" title="Novo Arquivo">
                  <i class="fas fa-file-plus"></i>
                </div>
                <div class="file-action-button" title="Upload">
                  <i class="fas fa-upload"></i>
                </div>
                <div class="file-action-button" title="Atualizar">
                  <i class="fas fa-sync-alt"></i>
                </div>
              </div>
            </div>
            <div class="file-manager-content">
              <div class="file-sidebar">
                <div class="file-tree">
                  <div class="tree-item active" data-path="/Desktop">
                    <i class="fas fa-home"></i>
                    <span>Desktop</span>
                  </div>
                  <div class="tree-item" data-path="/Documents">
                    <i class="fas fa-folder"></i>
                    <span>Documentos</span>
                  </div>
                  <div class="tree-item" data-path="/Pictures">
                    <i class="fas fa-folder"></i>
                    <span>Imagens</span>
                  </div>
                  <div class="tree-item" data-path="/Music">
                    <i class="fas fa-folder"></i>
                    <span>Músicas</span>
                  </div>
                  <div class="tree-item" data-path="/Videos">
                    <i class="fas fa-folder"></i>
                    <span>Vídeos</span>
                  </div>
                  <div class="tree-item" data-path="/Downloads">
                    <i class="fas fa-download"></i>
                    <span>Downloads</span>
                  </div>
                </div>
              </div>
              <div class="file-main">
                <div class="file-grid" id="fileGrid">
                  <!-- Files and folders will be dynamically added here -->
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Initialize file manager
    function initializeFileManager(fileManagerWindow) {
      const fileGrid = fileManagerWindow.querySelector('#fileGrid');
      const newFolderButton = fileManagerWindow.querySelector('.file-action-button[title="Nova Pasta"]');
      const refreshButton = fileManagerWindow.querySelector('.file-action-button[title="Atualizar"]');
      const sidebarItems = fileManagerWindow.querySelectorAll('.tree-item');
      
      // Load files for current path
      loadFilesForPath(currentPath, fileGrid);
      
      // New folder button
      newFolderButton.addEventListener('click', function() {
        playSound('click');
        showNewFolderDialog();
      });
      
      // Refresh button
      refreshButton.addEventListener('click', function() {
        playSound('click');
        loadFilesForPath(currentPath, fileGrid);
        showNotification('Arquivos', 'Lista de arquivos atualizada', 'success');
      });
      
      // Sidebar items
      sidebarItems.forEach(item => {
        item.addEventListener('click', function() {
          playSound('click');
          const path = this.getAttribute('data-path');
          currentPath = path;
          
          // Update active state
          sidebarItems.forEach(i => i.classList.remove('active'));
          this.classList.add('active');
          
          // Update file path display
          const pathDisplay = fileManagerWindow.querySelector('.file-path');
          pathDisplay.innerHTML = path.split('/').map(segment => 
            segment === '' ? '<i class="fas fa-home"></i>' : `<span>${segment}</span>`
          ).join('<span class="file-path-separator">/</span>');
          
          // Load files for new path
          loadFilesForPath(path, fileGrid);
        });
      });
      
      // Set context to file manager when inside file manager window
      fileManagerWindow.addEventListener('mouseenter', function() {
        currentContext = 'filemanager';
      });
      
      fileManagerWindow.addEventListener('mouseleave', function() {
        currentContext = 'desktop';
      });
    }
    
    // Load files for a specific path
    function loadFilesForPath(path, fileGrid) {
      // Clear current files
      fileGrid.innerHTML = '';
      
      // Get directory from file system
      const dir = getDirectory(path);
      
      if (!dir || dir.type !== 'directory') {
        return;
      }
      
      // Load files and folders
      const items = dir.children || {};
      
      for (const [name, item] of Object.entries(items)) {
        const fileElement = createFileItem(name, item.type, null, getItemIcon(item));
        fileGrid.appendChild(fileElement);
      }
      
      // If this is the desktop path, also load desktop folders
      if (path === '/Desktop') {
        desktopFolders.forEach(folder => {
          const folderElement = createFileItem(folder.name, 'folder', folder.id);
          fileGrid.appendChild(folderElement);
        });
      }
    }
    
    // Get appropriate icon for file item
    function getItemIcon(item) {
      if (item.type === 'directory') {
        return 'fas fa-folder';
      }
      
      // Determine icon based on file extension
      const name = item.name || '';
      const extension = name.split('.').pop().toLowerCase();
      
      switch (extension) {
        case 'pdf':
          return 'fas fa-file-pdf';
        case 'doc':
        case 'docx':
          return 'fas fa-file-word';
        case 'xls':
        case 'xlsx':
          return 'fas fa-file-excel';
        case 'ppt':
        case 'pptx':
          return 'fas fa-file-powerpoint';
        case 'jpg':
        case 'jpeg':
        case 'png':
        case 'gif':
          return 'fas fa-file-image';
        case 'mp3':
        case 'wav':
        case 'ogg':
          return 'fas fa-file-audio';
        case 'mp4':
        case 'avi':
        case 'mkv':
          return 'fas fa-file-video';
        case 'zip':
        case 'rar':
        case '7z':
          return 'fas fa-file-archive';
        case 'txt':
        case 'md':
          return 'fas fa-file-alt';
        case 'html':
        case 'css':
        case 'js':
          return 'fas fa-file-code';
        default:
          return 'fas fa-file';
      }
    }
    
    // Create file item element
    function createFileItem(name, type, id = null, iconClass = null) {
      const fileItem = document.createElement('div');
      fileItem.className = 'file-item';
      fileItem.setAttribute('data-name', name);
      fileItem.setAttribute('data-type', type);
      
      if (id) {
        fileItem.setAttribute('data-id', id);
      }
      
      if (type === 'folder') {
        fileItem.innerHTML = `
          <i class="fas fa-folder file-icon"></i>
          <div class="file-name">${name}</div>
          <div class="file-info">Pasta</div>
        `;
      } else {
        const icon = iconClass || 'fas fa-file';
        fileItem.innerHTML = `
          <i class="${icon} file-icon"></i>
          <div class="file-name">${name}</div>
          <div class="file-info">Arquivo</div>
        `;
      }
      
      // Add click event
      fileItem.addEventListener('click', function(e) {
        // Remove selected class from all items
        document.querySelectorAll('.file-item').forEach(item => item.classList.remove('selected'));
        
        // Add selected class to clicked item
        this.classList.add('selected');
        
        // Set as selected file item
        selectedFileItem = this;
      });
      
      // Add double click event
      fileItem.addEventListener('dblclick', function() {
        playSound('click');
        
        if (type === 'folder') {
          // Open folder
          const fileManagerWindow = document.getElementById('filemanager-window');
          if (fileManagerWindow) {
            const fileGrid = fileManagerWindow.querySelector('#fileGrid');
            const pathDisplay = fileManagerWindow.querySelector('.file-path');
            
            // Update path
            currentPath = `${currentPath}/${name}`;
            pathDisplay.innerHTML = currentPath.split('/').map(segment => 
              segment === '' ? '<i class="fas fa-home"></i>' : `<span>${segment}</span>`
            ).join('<span class="file-path-separator">/</span>');
            
            // Load files for new path
            loadFilesForPath(currentPath, fileGrid);
          }
        } else {
          // Open file
          showNotification('Arquivo', `Abrindo ${name}...`, 'info');
        }
      });
      
      return fileItem;
    }
    
    // Create game center window
    function createGameCenterWindow() {
      return `
        <div class="window-content">
          <div class="game-center">
            <div class="game-center-header">
              <div class="game-center-title">Central de Jogos</div>
              <div class="game-stats">
                <div class="game-stat">
                  <div class="game-stat-value">0</div>
                  <div class="game-stat-label">Jogos</div>
                </div>
                <div class="game-stat">
                  <div class="game-stat-value">0h</div>
                  <div class="game-stat-label">Jogados</div>
                </div>
                <div class="game-stat">
                  <div class="game-stat-value">0</div>
                  <div class="game-stat-label">Conquistas</div>
                </div>
              </div>
            </div>
            <div class="game-center-content">
              <div class="no-games-message">Nenhum jogo disponível no momento</div>
              <div class="no-games-description">
                A loja de jogos estará disponível em breve. Fique de olho nas atualizações do sistema para saber quando novos jogos serão adicionados.
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Create media player window
    function createMediaPlayerWindow() {
      return `
        <div class="window-content">
          <div class="media-player">
            <div class="player-header">
              <div class="player-title">Reprodutor de Mídia</div>
              <button class="player-upload">
                <i class="fas fa-upload"></i> Upload
              </button>
              <input type="file" class="player-upload-input" accept="audio/*" multiple style="display: none;">
            </div>
            <div class="player-main">
              <div class="player-visualizer">
                <div class="visualizer-bars" id="visualizerBars"></div>
              </div>
              <div class="player-info">
                <div class="player-song-title">Nenhuma música selecionada</div>
                <div class="player-artist">Selecione uma música para começar</div>
                <div class="player-progress">
                  <div class="progress-bar">
                    <div class="progress-fill"></div>
                  </div>
                  <div class="progress-time">
                    <span>0:00</span>
                    <span>0:00</span>
                  </div>
                </div>
                <div class="player-controls">
                  <div class="player-button">
                    <i class="fas fa-step-backward"></i>
                  </div>
                  <div class="player-button play">
                    <i class="fas fa-play"></i>
                  </div>
                  <div class="player-button">
                    <i class="fas fa-step-forward"></i>
                  </div>
                  <div class="player-button">
                    <i class="fas fa-random"></i>
                  </div>
                  <div class="player-button">
                    <i class="fas fa-redo"></i>
                  </div>
                </div>
              </div>
              <div class="player-playlist">
                <div class="playlist-title">Playlist</div>
                <div class="playlist-items" id="playlistItems">
                  <div class="playlist-item empty-playlist">
                    <p>Nenhuma música na playlist</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    
    // Initialize media player
    function initializeMediaPlayer(mediaPlayerWindow) {
      const uploadButton = mediaPlayerWindow.querySelector('.player-upload');
      const uploadInput = mediaPlayerWindow.querySelector('.player-upload-input');
      const playButton = mediaPlayerWindow.querySelector('.player-button.play');
      const playlistItems = mediaPlayerWindow.querySelector('#playlistItems');
      const songTitle = mediaPlayerWindow.querySelector('.player-song-title');
      const artist = mediaPlayerWindow.querySelector('.player-artist');
      const progressBar = mediaPlayerWindow.querySelector('.progress-bar');
      const progressFill = mediaPlayerWindow.querySelector('.progress-fill');
      const progressTime = mediaPlayerWindow.querySelectorAll('.progress-time span');
      
      let currentSongIndex = -1;
      let isPlaying = false;
      let songs = [];
      let currentAudio = null;
      
      // Upload button
      uploadButton.addEventListener('click', function() {
        playSound('click');
        uploadInput.click();
      });
      
      // Upload input
      uploadInput.addEventListener('change', function(e) {
        const files = Array.from(e.target.files);
        
        if (files.length > 0) {
          // Clear empty playlist message
          playlistItems.innerHTML = '';
          
          // Add each file to playlist
          files.forEach((file, index) => {
            if (file.type.startsWith('audio/')) {
              const song = {
                name: file.name.replace(/\.[^/.]+$/, ""), // Remove extension
                artist: 'Artista Desconhecido',
                duration: '0:00',
                file: file
              };
              
              songs.push(song);
              
              // Create playlist item
              const playlistItem = document.createElement('div');
              playlistItem.className = 'playlist-item';
              playlistItem.setAttribute('data-index', index);
              
              playlistItem.innerHTML = `
                <div class="playlist-item-info">
                  <h4>${song.name}</h4>
                  <p>${song.artist}</p>
                </div>
                <div class="playlist-item-duration">${song.duration}</div>
              `;
              
              // Add click event to play song
              playlistItem.addEventListener('click', function() {
                const index = parseInt(this.getAttribute('data-index'));
                playSong(index);
              });
              
              playlistItems.appendChild(playlistItem);
            }
          });
          
          showNotification('Reprodutor de Mídia', `${files.length} músicas adicionadas à playlist`, 'success');
        }
      });
      
      // Play button
      playButton.addEventListener('click', function() {
        playSound('click');
        
        if (songs.length === 0) {
          showNotification('Reprodutor de Mídia', 'Nenhuma música na playlist', 'warning');
          return;
        }
        
        if (currentSongIndex === -1) {
          playSong(0);
        } else if (isPlaying) {
          pauseSong();
        } else {
          resumeSong();
        }
      });
      
      // Play song function
      function playSong(index) {
        if (index < 0 || index >= songs.length) return;
        
        // Stop current song if playing
        if (currentAudio) {
          currentAudio.pause();
          currentAudio = null;
        }
        
        currentSongIndex = index;
        const song = songs[index];
        
        // Update UI
        songTitle.textContent = song.name;
        artist.textContent = song.artist;
        
        // Update playlist active state
        document.querySelectorAll('.playlist-item').forEach((item, i) => {
          if (i === index) {
            item.classList.add('active');
          } else {
            item.classList.remove('active');
          }
        });
        
        // Create audio element
        currentAudio = new Audio();
        currentAudio.src = URL.createObjectURL(song.file);
        
        // Play audio
        currentAudio.play()
          .then(() => {
            isPlaying = true;
            playButton.innerHTML = '<i class="fas fa-pause"></i>';
            createVisualizer();
            showNotification('Reprodutor de Mídia', `Tocando: ${song.name}`, 'info');
          })
          .catch(error => {
            console.error('Error playing audio:', error);
            showNotification('Reprodutor de Mídia', 'Erro ao reproduzir música', 'error');
          });
        
        // Update progress
        currentAudio.addEventListener('timeupdate', updateProgress);
        
        // Handle song end
        currentAudio.addEventListener('ended', function() {
          // Play next song
          if (currentSongIndex < songs.length - 1) {
            playSong(currentSongIndex + 1);
          } else {
            // Stop if last song
            isPlaying = false;
            playButton.innerHTML = '<i class="fas fa-play"></i>';
            currentSongIndex = -1;
            songTitle.textContent = 'Nenhuma música selecionada';
            artist.textContent = 'Selecione uma música para começar';
            progressFill.style.width = '0%';
            progressTime[0].textContent = '0:00';
            progressTime[1].textContent = '0:00';
          }
        });
        
        // Get duration
        currentAudio.addEventListener('loadedmetadata', function() {
          const duration = currentAudio.duration;
          const minutes = Math.floor(duration / 60);
          const seconds = Math.floor(duration % 60);
          
          // Update duration in playlist
          songs[currentSongIndex].duration = `${minutes}:${seconds.toString().padStart(2, '0')}`;
          document.querySelector(`.playlist-item[data-index="${currentSongIndex}"] .playlist-item-duration`).textContent = songs[currentSongIndex].duration;
          
          // Update progress time
          progressTime[1].textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        });
      }
      
      // Pause song function
      function pauseSong() {
        if (currentAudio) {
          currentAudio.pause();
          isPlaying = false;
          playButton.innerHTML = '<i class="fas fa-play"></i>';
        }
      }
      
      // Resume song function
      function resumeSong() {
        if (currentAudio) {
          currentAudio.play()
            .then(() => {
              isPlaying = true;
              playButton.innerHTML = '<i class="fas fa-pause"></i>';
            })
            .catch(error => {
              console.error('Error resuming audio:', error);
              showNotification('Reprodutor de Mídia', 'Erro ao retomar música', 'error');
            });
        }
      }
      
      // Update progress function
      function updateProgress() {
        if (!currentAudio) return;
        
        const currentTime = currentAudio.currentTime;
        const duration = currentAudio.duration;
        
        if (isNaN(duration)) return;
        
        const progressPercent = (currentTime / duration) * 100;
        progressFill.style.width = `${progressPercent}%`;
        
        const currentMinutes = Math.floor(currentTime / 60);
        const currentSeconds = Math.floor(currentTime % 60);
        progressTime[0].textContent = `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')}`;
      }
      
      // Progress bar click
      progressBar.addEventListener('click', function(e) {
        if (!currentAudio) return;
        
        const rect = progressBar.getBoundingClientRect();
        const offsetX = e.clientX - rect.left;
        const width = rect.width;
        const percentage = offsetX / width;
        
        currentAudio.currentTime = percentage * currentAudio.duration;
      });
    }
    
    // Bring window to front
    function bringWindowToFront(windowElement) {
      windowElement.style.zIndex = ++highestZIndex;
    }
    
    // Add app to taskbar
    function addToTaskbar(appId, appIcon, appTitle) {
      const taskbarApps = document.getElementById('taskbarApps');
      
      // Check if app is already in taskbar
      const existingApp = document.getElementById(`taskbar-${appId}`);
      if (existingApp) {
        return;
      }
      
      // Create taskbar app element
      const taskbarApp = document.createElement('div');
      taskbarApp.id = `taskbar-${appId}`;
      taskbarApp.className = 'taskbar-app active';
      taskbarApp.setAttribute('data-app', appId);
      taskbarApp.setAttribute('title', appTitle);
      taskbarApp.innerHTML = `<i class="${appIcon}"></i>`;
      
      // Add click event to toggle window
      taskbarApp.addEventListener('click', function() {
        playSound('click');
        const appWindow = document.getElementById(`${appId}-window`);
        if (appWindow) {
          bringWindowToFront(appWindow);
          
          if (appWindow.classList.contains('active')) {
            appWindow.classList.remove('active');
            taskbarApp.classList.remove('active');
          } else {
            appWindow.classList.add('active');
            taskbarApp.classList.add('active');
          }
        }
      });
      
      // Add to taskbar
      taskbarApps.appendChild(taskbarApp);
    }
    
    // Update taskbar app status
    function updateTaskbarAppStatus(appId, isActive) {
      const taskbarApp = document.getElementById(`taskbar-${appId}`);
      if (taskbarApp) {
        if (isActive) {
          taskbarApp.classList.add('active');
        } else {
          taskbarApp.classList.remove('active');
        }
      }
    }
    
    // Remove app from taskbar
    function removeFromTaskbar(appId) {
      const taskbarApp = document.getElementById(`taskbar-${appId}`);
      if (taskbarApp) {
        taskbarApp.remove();
      }
    }
    
    // Make window draggable
    function makeWindowDraggable(windowElement) {
      let isDragging = false;
      let currentX;
      let currentY;
      let initialX;
      let initialY;
      let xOffset = 0;
      let yOffset = 0;
      
      const header = windowElement.querySelector('.window-header');
      
      header.addEventListener('mousedown', dragStart);
      document.addEventListener('mousemove', drag);
      document.addEventListener('mouseup', dragEnd);
      
      // Bring window to front when clicked
      windowElement.addEventListener('mousedown', function() {
        bringWindowToFront(windowElement);
      });
      
      function dragStart(e) {
        initialX = e.clientX - xOffset;
        initialY = e.clientY - yOffset;
        
        if (e.target === header || header.contains(e.target)) {
          isDragging = true;
          bringWindowToFront(windowElement);
        }
      }
      
      function drag(e) {
        if (isDragging) {
          e.preventDefault();
          currentX = e.clientX - initialX;
          currentY = e.clientY - initialY;
          
          xOffset = currentX;
          yOffset = currentY;
          
          windowElement.style.transform = `translate(${currentX}px, ${currentY}px)`;
        }
      }
      
      function dragEnd() {
        initialX = currentX;
        initialY = currentY;
        isDragging = false;
      }
    }
    
    // Make window resizable
    function makeWindowResizable(windowElement) {
      const resizeHandles = windowElement.querySelectorAll('.resize-handle');
      let isResizing = false;
      let currentHandle = null;
      let startX = 0;
      let startY = 0;
      let startWidth = 0;
      let startHeight = 0;
      let startLeft = 0;
      let startTop = 0;
      
      resizeHandles.forEach(handle => {
        handle.addEventListener('mousedown', initResize);
      });
      
      function initResize(e) {
        isResizing = true;
        currentHandle = e.target;
        startX = e.clientX;
        startY = e.clientY;
        startWidth = parseInt(document.defaultView.getComputedStyle(windowElement).width, 10);
        startHeight = parseInt(document.defaultView.getComputedStyle(windowElement).height, 10);
        startLeft = parseInt(document.defaultView.getComputedStyle(windowElement).left, 10);
        startTop = parseInt(document.defaultView.getComputedStyle(windowElement).top, 10);
        
        document.addEventListener('mousemove', doResize);
        document.addEventListener('mouseup', stopResize);
        
        e.preventDefault();
      }
      
      function doResize(e) {
        if (!isResizing) return;
        
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        
        if (currentHandle.classList.contains('resize-handle-right')) {
          windowElement.style.width = (startWidth + dx) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-left')) {
          windowElement.style.width = (startWidth - dx) + 'px';
          windowElement.style.left = (startLeft + dx) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-bottom')) {
          windowElement.style.height = (startHeight + dy) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-top')) {
          windowElement.style.height = (startHeight - dy) + 'px';
          windowElement.style.top = (startTop + dy) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-bottom-right')) {
          windowElement.style.width = (startWidth + dx) + 'px';
          windowElement.style.height = (startHeight + dy) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-bottom-left')) {
          windowElement.style.width = (startWidth - dx) + 'px';
          windowElement.style.height = (startHeight + dy) + 'px';
          windowElement.style.left = (startLeft + dx) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-top-right')) {
          windowElement.style.width = (startWidth + dx) + 'px';
          windowElement.style.height = (startHeight - dy) + 'px';
          windowElement.style.top = (startTop + dy) + 'px';
        } else if (currentHandle.classList.contains('resize-handle-top-left')) {
          windowElement.style.width = (startWidth - dx) + 'px';
          windowElement.style.height = (startHeight - dy) + 'px';
          windowElement.style.left = (startLeft + dx) + 'px';
          windowElement.style.top = (startTop + dy) + 'px';
        }
      }
      
      function stopResize() {
        isResizing = false;
        currentHandle = null;
        document.removeEventListener('mousemove', doResize);
        document.removeEventListener('mouseup', stopResize);
      }
    }
    
    // Setup window controls
    function setupWindowControls(windowElement) {
      const minimizeBtn = windowElement.querySelector('.window-control.minimize');
      const maximizeBtn = windowElement.querySelector('.window-control.maximize');
      const closeBtn = windowElement.querySelector('.window-control.close');
      const appId = windowElement.id.replace('-window', '');
      
      minimizeBtn.addEventListener('click', function() {
        playSound('click');
        windowElement.classList.remove('active');
        updateTaskbarAppStatus(appId, false);
      });
      
      maximizeBtn.addEventListener('click', function() {
        playSound('click');
        if (windowElement.style.width === '100vw' && windowElement.style.height === 'calc(100vh - 60px)') {
          // Restore to original size
          windowElement.style.width = '800px';
          windowElement.style.height = '600px';
          windowElement.style.top = '50px';
          windowElement.style.left = '50px';
        } else {
          // Maximize
          windowElement.style.width = '100vw';
          windowElement.style.height = 'calc(100vh - 60px)';
          windowElement.style.top = '0';
          windowElement.style.left = '0';
        }
      });
      
      closeBtn.addEventListener('click', function() {
        playSound('click');
        windowElement.remove();
        removeFromTaskbar(appId);
      });
    }
    
    // Start menu apps
    document.querySelectorAll('.start-app').forEach(app => {
      app.addEventListener('click', function() {
        playSound('click');
        const appId = this.getAttribute('data-app');
        const appTitle = this.getAttribute('data-title');
        const appIcon = this.getAttribute('data-icon');
        const appPath = this.getAttribute('data-path');
        
        openApp(appId, appTitle, appIcon, appPath);
      });
    });
    
    // Brightness control
    const brightnessSlider = document.getElementById('brightnessSlider');
    const brightnessLevel = brightnessSlider.querySelector('.brightness-level');
    const brightnessHandle = brightnessSlider.querySelector('.brightness-handle');
    
    let isDraggingBrightness = false;
    
    function updateBrightness(percentage) {
      brightnessLevel.style.width = percentage + '%';
      brightnessHandle.style.left = percentage + '%';
      
      // Simulate brightness change
      document.body.style.filter = `brightness(${0.5 + percentage / 200})`;
    }
    
    brightnessSlider.addEventListener('mousedown', function(e) {
      isDraggingBrightness = true;
      updateBrightnessFromEvent(e);
    });
    
    document.addEventListener('mousemove', function(e) {
      if (isDraggingBrightness) {
        updateBrightnessFromEvent(e);
      }
    });
    
    document.addEventListener('mouseup', function() {
      isDraggingBrightness = false;
    });
    
    function updateBrightnessFromEvent(e) {
      const rect = brightnessSlider.getBoundingClientRect();
      const percentage = Math.max(0, Math.min(100, ((e.clientX - rect.left) / rect.width) * 100));
      updateBrightness(percentage);
    }
    
    // Volume control
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeLevel = volumeSlider.querySelector('.volume-level');
    const volumeHandle = volumeSlider.querySelector('.volume-handle');
    
    let isDraggingVolume = false;
    
    function updateVolume(percentage) {
      volumeLevel.style.width = percentage + '%';
      volumeHandle.style.left = percentage + '%';
      
      // Simulate volume change (in a real implementation, this would control actual audio)
      const volumeIcon = document.querySelector('.volume-icon');
      if (percentage === 0) {
        volumeIcon.className = 'fas fa-volume-mute volume-icon';
      } else if (percentage < 33) {
        volumeIcon.className = 'fas fa-volume-down volume-icon';
      } else if (percentage < 66) {
        volumeIcon.className = 'fas fa-volume-up volume-icon';
      } else {
        volumeIcon.className = 'fas fa-volume-up volume-icon';
      }
    }
    
    volumeSlider.addEventListener('mousedown', function(e) {
      isDraggingVolume = true;
      updateVolumeFromEvent(e);
    });
    
    document.addEventListener('mousemove', function(e) {
      if (isDraggingVolume) {
        updateVolumeFromEvent(e);
      }
    });
    
    document.addEventListener('mouseup', function() {
      isDraggingVolume = false;
    });
    
    function updateVolumeFromEvent(e) {
      const rect = volumeSlider.getBoundingClientRect();
      const percentage = Math.max(0, Math.min(100, ((e.clientX - rect.left) / rect.width) * 100));
      updateVolume(percentage);
    }
    
    // WiFi control
    const networkControl = document.getElementById('networkControl');
    const wifiMenu = document.getElementById('wifiMenu');
    const wifiToggle = document.getElementById('wifiToggle');
    const wifiNetworks = document.getElementById('wifiNetworks');
    const wifiPasswordContainer = document.getElementById('wifiPasswordContainer');
    const wifiPasswordInput = document.getElementById('wifiPasswordInput');
    const wifiConnectButton = document.getElementById('wifiConnectButton');
    const networkStatus = document.querySelector('.network-status');
    const networkIcon = document.querySelector('.network-icon');
    
    let currentNetwork = 'home';
    let wifiEnabled = true;
    
    networkControl.addEventListener('click', function() {
      playSound('click');
      wifiMenu.classList.toggle('active');
      // Close other panels
      startMenu.classList.remove('active');
      settingsPanel.classList.remove('active');
    });
    
    // WiFi toggle
    wifiToggle.addEventListener('click', function() {
      playSound('click');
      wifiEnabled = !wifiEnabled;
      wifiToggle.classList.toggle('active');
      
      if (wifiEnabled) {
        networkStatus.style.display = 'block';
        networkIcon.className = 'fas fa-wifi network-icon';
        networkStatus.style.background = 'var(--rgb-green)';
      } else {
        networkStatus.style.display = 'none';
        networkIcon.className = 'fas fa-wifi-slash network-icon';
        // Remove active class from all networks
        document.querySelectorAll('.wifi-network').forEach(network => {
          network.classList.remove('active');
        });
      }
    });
    
    // WiFi network selection
    document.querySelectorAll('.wifi-network').forEach(network => {
      network.addEventListener('click', function() {
        playSound('click');
        const networkName = this.getAttribute('data-network');
        
        if (networkName === 'guest') {
          // Connect to open network
          connectToNetwork(networkName, this);
        } else {
          // Show password input
          currentNetwork = networkName;
          wifiPasswordContainer.style.display = 'block';
          wifiPasswordInput.focus();
        }
      });
    });
    
    // WiFi connect button
    wifiConnectButton.addEventListener('click', function() {
      playSound('click');
      const password = wifiPasswordInput.value;
      
      if (password) {
        // Simple password validation (in a real app, this would be more secure)
        if ((currentNetwork === 'home' && password === 'vanilla123') || 
            (currentNetwork === 'office' && password === 'office456')) {
          // Find the network element and connect
          const networkElement = document.querySelector(`[data-network="${currentNetwork}"]`);
          connectToNetwork(currentNetwork, networkElement);
        } else {
          showNotification('Erro', 'Senha incorreta. Tente novamente.', 'error');
        }
      }
    });
    
    function connectToNetwork(networkName, networkElement) {
      // Remove active class from all networks
      document.querySelectorAll('.wifi-network').forEach(network => {
        network.classList.remove('active');
      });
      
      // Add active class to selected network
      networkElement.classList.add('active');
      
      // Update network status
      networkStatus.style.display = 'block';
      networkIcon.className = 'fas fa-wifi network-icon';
      networkStatus.style.background = 'var(--rgb-green)';
      
      // Update network details
      const networkDetails = networkElement.querySelector('.wifi-details p');
      networkDetails.textContent = 'Conectado';
      
      // Hide password input
      wifiPasswordContainer.style.display = 'none';
      wifiPasswordInput.value = '';
      
      // Close WiFi menu
      wifiMenu.classList.remove('active');
      
      // Show notification
      showNotification('Wi-Fi', `Conectado à rede ${networkName}`, 'success');
    }
    
    // Context menu
    const contextMenu = document.getElementById('contextMenu');
    const contextRefresh = document.getElementById('contextRefresh');
    const contextNewFolder = document.getElementById('contextNewFolder');
    const contextPaste = document.getElementById('contextPaste');
    const contextRename = document.getElementById('contextRename');
    const contextDelete = document.getElementById('contextDelete');
    const contextProperties = document.getElementById('contextProperties');
    const contextSeparator = document.getElementById('contextSeparator');
    const contextSeparator2 = document.getElementById('contextSeparator2');
    const contextSeparator3 = document.getElementById('contextSeparator3');
    
    document.addEventListener('contextmenu', function(e) {
      e.preventDefault();
      
      // Show context menu at mouse position
      contextMenu.style.left = e.pageX + 'px';
      contextMenu.style.top = e.pageY + 'px';
      contextMenu.classList.add('active');
      
      // Adjust position if menu goes off screen
      const rect = contextMenu.getBoundingClientRect();
      if (rect.right > window.innerWidth) {
        contextMenu.style.left = (e.pageX - rect.width) + 'px';
      }
      if (rect.bottom > window.innerHeight) {
        contextMenu.style.top = (e.pageY - rect.height) + 'px';
      }
      
      // Show/hide menu items based on context
      if (currentContext === 'desktop') {
        // Desktop context menu
        contextRefresh.style.display = 'flex';
        contextNewFolder.style.display = 'flex';
        contextPaste.style.display = clipboardData ? 'flex' : 'none';
        contextSeparator.style.display = 'flex';
        contextRename.style.display = 'none';
        contextDelete.style.display = 'none';
        contextSeparator2.style.display = 'none';
        contextProperties.style.display = 'none';
        contextSeparator3.style.display = 'none';
      } else {
        // File manager context menu
        contextRefresh.style.display = 'flex';
        contextNewFolder.style.display = 'flex';
        contextPaste.style.display = clipboardData ? 'flex' : 'none';
        contextSeparator.style.display = 'flex';
        contextRename.style.display = 'flex';
        contextDelete.style.display = 'flex';
        contextSeparator2.style.display = 'flex';
        contextProperties.style.display = 'flex';
        contextSeparator3.style.display = 'none';
      }
    });
    
    // Hide context menu when clicking outside
    document.addEventListener('click', function() {
      contextMenu.classList.remove('active');
    });
    
    // Context menu actions
    contextRefresh.addEventListener('click', function() {
      playSound('click');
      showNotification('Atualizado', 'Interface atualizada com sucesso!', 'success');
      contextMenu.classList.remove('active');
    });
    
    contextNewFolder.addEventListener('click', function() {
      playSound('click');
      showNewFolderDialog();
      contextMenu.classList.remove('active');
    });
    
    contextPaste.addEventListener('click', function() {
      playSound('click');
      if (clipboardData) {
        pasteFileItem();
      }
      contextMenu.classList.remove('active');
    });
    
    contextRename.addEventListener('click', function() {
      playSound('click');
      if (selectedFileItem) {
        renameFileItem(selectedFileItem);
      }
      contextMenu.classList.remove('active');
    });
    
    contextDelete.addEventListener('click', function() {
      playSound('click');
      if (selectedFileItem) {
        deleteFileItem(selectedFileItem);
      }
      contextMenu.classList.remove('active');
    });
    
    contextProperties.addEventListener('click', function() {
      playSound('click');
      if (selectedFileItem) {
        const name = selectedFileItem.getAttribute('data-name');
        const type = selectedFileItem.getAttribute('data-type');
        showNotification('Propriedades', `Nome: ${name}\nTipo: ${type === 'folder' ? 'Pasta' : 'Arquivo'}`, 'info');
      }
      contextMenu.classList.remove('active');
    });
    
    // New folder dialog
    const newFolderDialog = document.getElementById('newFolderDialog');
    const newFolderDialogClose = document.getElementById('newFolderDialogClose');
    const newFolderName = document.getElementById('newFolderName');
    const newFolderCancel = document.getElementById('newFolderCancel');
    const newFolderCreate = document.getElementById('newFolderCreate');
    
    function showNewFolderDialog() {
      newFolderDialog.classList.add('active');
      newFolderName.value = '';
      newFolderName.focus();
    }
    
    newFolderDialogClose.addEventListener('click', function() {
      playSound('click');
      newFolderDialog.classList.remove('active');
    });
    
    newFolderCancel.addEventListener('click', function() {
      playSound('click');
      newFolderDialog.classList.remove('active');
    });
    
    newFolderCreate.addEventListener('click', function() {
      playSound('click');
      const folderName = newFolderName.value.trim();
      
      if (folderName) {
        createDesktopFolder(folderName);
        newFolderDialog.classList.remove('active');
      } else {
        showNotification('Erro', 'Por favor, insira um nome para a pasta', 'error');
      }
    });
    
    newFolderName.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        newFolderCreate.click();
      }
    });
    
    // Rename dialog
    const renameDialog = document.getElementById('renameDialog');
    const renameDialogClose = document.getElementById('renameDialogClose');
    const renameName = document.getElementById('renameName');
    const renameCancel = document.getElementById('renameCancel');
    const renameConfirm = document.getElementById('renameConfirm');
    
    function renameFileItem(fileItem) {
      const currentName = fileItem.getAttribute('data-name');
      renameDialog.classList.add('active');
      renameName.value = currentName;
      renameName.focus();
      renameName.select();
    }
    
    renameDialogClose.addEventListener('click', function() {
      playSound('click');
      renameDialog.classList.remove('active');
    });
    
    renameCancel.addEventListener('click', function() {
      playSound('click');
      renameDialog.classList.remove('active');
    });
    
    renameConfirm.addEventListener('click', function() {
      playSound('click');
      const newName = renameName.value.trim();
      
      if (newName && selectedFileItem) {
        const oldName = selectedFileItem.getAttribute('data-name');
        selectedFileItem.setAttribute('data-name', newName);
        selectedFileItem.querySelector('.file-name').textContent = newName;
        
        // Update desktop folder if it's a desktop folder
        const folderId = selectedFileItem.getAttribute('data-id');
        if (folderId) {
          const folder = desktopFolders.find(f => f.id === folderId);
          if (folder) {
            folder.name = newName;
            saveDesktopFolders();
          }
        }
        
        // Update file system if it's a file system item
        const parentDir = getDirectory(currentPath);
        if (parentDir && parentDir.children && parentDir.children[oldName]) {
          parentDir.children[newName] = parentDir.children[oldName];
          delete parentDir.children[oldName];
        }
        
        showNotification('Renomeado', `${oldName} renomeado para ${newName}`, 'success');
        renameDialog.classList.remove('active');
      } else {
        showNotification('Erro', 'Por favor, insira um nome válido', 'error');
      }
    });
    
    renameName.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        renameConfirm.click();
      }
    });
    
    // Copy file item
    function copyFileItem(fileItem) {
      const name = fileItem.getAttribute('data-name');
      const type = fileItem.getAttribute('data-type');
      const id = fileItem.getAttribute('data-id');
      
      clipboardData = {
        name: name,
        type: type,
        id: id
      };
      
      showNotification('Copiado', `${name} copiado para a área de transferência`, 'success');
    }
    
    // Paste file item
    function pasteFileItem() {
      if (!clipboardData) return;
      
      if (currentContext === 'desktop') {
        // Create a new folder on desktop
        if (clipboardData.type === 'folder') {
          createDesktopFolder(clipboardData.name + ' (cópia)');
        }
      } else {
        // In file manager, add to current view
        const fileManagerWindow = document.getElementById('filemanager-window');
        if (fileManagerWindow) {
          const fileGrid = fileManagerWindow.querySelector('#fileGrid');
          
          if (clipboardData.type === 'folder') {
            const folderElement = createFileItem(clipboardData.name + ' (cópia)', 'folder');
            fileGrid.appendChild(folderElement);
            
            // Add to file system
            const parentDir = getDirectory(currentPath);
            if (parentDir) {
              if (!parentDir.children) {
                parentDir.children = {};
              }
              parentDir.children[clipboardData.name + ' (cópia)'] = {
                type: 'directory',
                children: {}
              };
            }
          } else {
            const fileElement = createFileItem(clipboardData.name + ' (cópia)', 'file');
            fileGrid.appendChild(fileElement);
            
            // Add to file system
            const parentDir = getDirectory(currentPath);
            if (parentDir) {
              if (!parentDir.children) {
                parentDir.children = {};
              }
              parentDir.children[clipboardData.name + ' (cópia)'] = {
                type: 'file',
                size: '0 KB',
                modified: new Date().toISOString().split('T')[0]
              };
            }
          }
        }
      }
      
      showNotification('Colado', `${clipboardData.name} colado com sucesso`, 'success');
    }
    
    // Delete file item
    function deleteFileItem(fileItem) {
      const name = fileItem.getAttribute('data-name');
      const type = fileItem.getAttribute('data-type');
      const id = fileItem.getAttribute('data-id');
      
      if (confirm(`Tem certeza que deseja excluir ${name}?`)) {
        // Remove from desktop if it's a desktop folder
        if (id) {
          const folderIndex = desktopFolders.findIndex(f => f.id === id);
          if (folderIndex !== -1) {
            desktopFolders.splice(folderIndex, 1);
            saveDesktopFolders();
            
            // Remove from DOM
            const desktopFolder = document.querySelector(`.desktop-folder[data-id="${id}"]`);
            if (desktopFolder) {
              desktopFolder.remove();
            }
          }
        }
        
        // Remove from file system if it's a file system item
        const parentDir = getDirectory(currentPath);
        if (parentDir && parentDir.children && parentDir.children[name]) {
          delete parentDir.children[name];
        }
        
        // Remove from file manager if it's there
        fileItem.remove();
        
        showNotification('Excluído', `${name} foi excluído com sucesso`, 'success');
        selectedFileItem = null;
      }
    }
    
    // Create desktop folder
    function createDesktopFolder(name) {
      const folderId = 'folder-' + Date.now();
      
      // Add to desktopFolders array
      desktopFolders.push({
        id: folderId,
        name: name
      });
      
      // Save to localStorage
      saveDesktopFolders();
      
      // Create folder element
      const folderElement = document.createElement('div');
      folderElement.className = 'desktop-folder';
      folderElement.setAttribute('data-id', folderId);
      folderElement.setAttribute('data-name', name);
      folderElement.style.top = '100px';
      folderElement.style.left = '120px';
      
      folderElement.innerHTML = `
        <i class="fas fa-folder"></i>
        <span>${name}</span>
      `;
      
      // Add events
      folderElement.addEventListener('dblclick', function() {
        playSound('click');
        openFileManager();
      });
      
      folderElement.addEventListener('click', function(e) {
        // Remove selected class from all icons and folders
        document.querySelectorAll('.desktop-icon, .desktop-folder').forEach(i => i.classList.remove('selected'));
        
        // Add selected class to clicked folder
        this.classList.add('selected');
      });
      
      // Add to desktop
      document.getElementById('desktopContent').appendChild(folderElement);
      
      showNotification('Pasta Criada', `Pasta "${name}" criada com sucesso`, 'success');
    }
    
    // Save desktop folders to localStorage
    function saveDesktopFolders() {
      localStorage.setItem('desktopFolders', JSON.stringify(desktopFolders));
    }
    
    // Load desktop folders from localStorage
    function loadDesktopFolders() {
      const savedFolders = localStorage.getItem('desktopFolders');
      if (savedFolders) {
        desktopFolders = JSON.parse(savedFolders);
        
        // Create folder elements
        desktopFolders.forEach((folder, index) => {
          const folderElement = document.createElement('div');
          folderElement.className = 'desktop-folder';
          folderElement.setAttribute('data-id', folder.id);
          folderElement.setAttribute('data-name', folder.name);
          folderElement.style.top = (100 + Math.floor(index / 3) * 80) + 'px';
          folderElement.style.left = (120 + (index % 3) * 100) + 'px';
          
          folderElement.innerHTML = `
            <i class="fas fa-folder"></i>
            <span>${folder.name}</span>
          `;
          
          // Add events
          folderElement.addEventListener('dblclick', function() {
            playSound('click');
            openFileManager();
          });
          
          folderElement.addEventListener('click', function(e) {
            // Remove selected class from all icons and folders
            document.querySelectorAll('.desktop-icon, .desktop-folder').forEach(i => i.classList.remove('selected'));
            
            // Add selected class to clicked folder
            this.classList.add('selected');
          });
          
          // Add to desktop
          document.getElementById('desktopContent').appendChild(folderElement);
        });
      }
    }
    
    // Open file manager
    function openFileManager() {
      openApp('filemanager', 'Arquivos', 'fas fa-folder', 'filemanager.html');
    }
    
    // Search functionality
    const searchBar = document.getElementById('searchBar');
    const searchResults = document.getElementById('searchResults');
    
    searchBar.addEventListener('input', function() {
      const query = this.value.toLowerCase().trim();
      
      if (query.length > 0) {
        // Search for matching apps
        const allApps = document.querySelectorAll('.start-app');
        const matches = [];
        
        allApps.forEach(app => {
          const title = app.getAttribute('data-title').toLowerCase();
          const category = app.getAttribute('data-category').toLowerCase();
          
          if (title.includes(query) || category.includes(query)) {
            matches.push(app);
          }
        });
        
        // Display results
        searchResults.innerHTML = '';
        
        if (matches.length > 0) {
          matches.slice(0, 5).forEach(app => {
            const resultItem = document.createElement('div');
            resultItem.className = 'search-result-item';
            resultItem.innerHTML = `
              <div class="search-result-icon">
                <i class="${app.getAttribute('data-icon')}"></i>
              </div>
              <div class="search-result-info">
                <h4>${app.getAttribute('data-title')}</h4>
                <p>${app.getAttribute('data-category')}</p>
              </div>
            `;
            
            resultItem.addEventListener('click', function() {
              playSound('click');
              const appId = app.getAttribute('data-app');
              const appTitle = app.getAttribute('data-title');
              const appIcon = app.getAttribute('data-icon');
              const appPath = app.getAttribute('data-path');
              
              openApp(appId, appTitle, appIcon, appPath);
              searchResults.classList.remove('active');
              searchBar.value = '';
            });
            
            searchResults.appendChild(resultItem);
          });
          
          searchResults.classList.add('active');
        } else {
          searchResults.innerHTML = '<div style="padding: 20px; text-align: center; color: var(--gray);">Nenhum resultado encontrado</div>';
          searchResults.classList.add('active');
        }
      } else {
        searchResults.classList.remove('active');
      }
    });
    
    // Hide search results when clicking outside
    document.addEventListener('click', function(e) {
      if (!searchBar.contains(e.target) && !searchResults.contains(e.target)) {
        searchResults.classList.remove('active');
      }
    });
    
    // Voice assistant
    const voiceAssistant = document.getElementById('voiceAssistant');
    const voiceAssistantModal = document.getElementById('voiceAssistantModal');
    const voiceAssistantClose = document.getElementById('voiceAssistantClose');
    const voiceResponse = document.getElementById('voiceResponse');
    
    voiceAssistant.addEventListener('click', function() {
      playSound('click');
      voiceAssistantActive = !voiceAssistantActive;
      
      if (voiceAssistantActive) {
        voiceAssistant.classList.add('active');
        voiceAssistantModal.classList.add('active');
        voiceResponse.textContent = 'Ouvindo... Diga um comando';
        
        // Simulate voice recognition
        setTimeout(() => {
          const commands = [
            'Abrir navegador',
            'Abrir configurações',
            'Qual a hora?',
            'Como está o clima?',
            'Tocar música',
            'Desligar sistema'
          ];
          
          const randomCommand = commands[Math.floor(Math.random() * commands.length)];
          voiceResponse.textContent = `Comando reconhecido: "${randomCommand}"`;
          
          // Execute command
          executeVoiceCommand(randomCommand);
        }, 2000);
      } else {
        voiceAssistant.classList.remove('active');
        voiceAssistantModal.classList.remove('active');
      }
    });
    
    voiceAssistantClose.addEventListener('click', function() {
      playSound('click');
      voiceAssistantActive = false;
      voiceAssistant.classList.remove('active');
      voiceAssistantModal.classList.remove('active');
    });
    
    // Execute voice command
    function executeVoiceCommand(command) {
      switch(command.toLowerCase()) {
        case 'abrir navegador':
          showNotification('Navegador', 'O navegador não está disponível na área de trabalho', 'warning');
          break;
        case 'abrir configurações':
          settingsPanel.classList.add('active');
          break;
        case 'qual a hora?':
          const now = new Date();
          const time = now.toLocaleTimeString('pt-BR');
          voiceResponse.textContent = `Agora são ${time}`;
          break;
        case 'como está o clima?':
          getWeatherData();
          voiceResponse.textContent = 'Verificando o clima...';
          break;
        case 'tocar música':
          openApp('mediaplayer', 'Reprodutor de Mídia', 'fas fa-play-circle', 'mediaplayer.html');
          break;
        case 'desligar sistema':
          showNotification('Desligando', 'O sistema será desligado em breve...', 'info');
          setTimeout(() => {
            window.close();
          }, 2000);
          break;
        default:
          voiceResponse.textContent = 'Comando não reconhecido';
      }
    }
    
    // Terminal functionality
    document.addEventListener('click', function(e) {
      if (e.target.closest('#terminal-window')) {
        const terminalInput = document.getElementById('terminalInput');
        if (terminalInput) {
          terminalInput.focus();
        }
      }
    });
    
    document.addEventListener('keydown', function(e) {
      if (e.target.id === 'terminalInput') {
        if (e.key === 'Enter') {
          e.preventDefault();
          const command = e.target.value.trim();
          const terminalContent = document.getElementById('terminalContent');
          
          // Add command to terminal
          const commandLine = document.createElement('div');
          commandLine.className = 'terminal-line';
          commandLine.innerHTML = `
            <span class="terminal-prompt">user@vanillaiceos:${currentPath}$</span>
            <span class="terminal-command">${command}</span>
          `;
          terminalContent.insertBefore(commandLine, terminalContent.lastElementChild);
          
          // Execute command
          executeTerminalCommand(command);
          
          // Clear input
          e.target.value = '';
        }
      }
    });
    
    // Execute terminal command
    function executeTerminalCommand(command) {
      const terminalContent = document.getElementById('terminalContent');
      const outputLine = document.createElement('div');
      outputLine.className = 'terminal-output';
      
      // Parse command and arguments
      const parts = command.split(' ');
      const cmd = parts[0];
      const args = parts.slice(1);
      
      // Execute command if it exists
      if (terminalCommands[cmd]) {
        const result = terminalCommands[cmd](args);
        if (result) {
          outputLine.textContent = result;
        }
      } else {
        outputLine.textContent = `Comando não encontrado: ${cmd}`;
      }
      
      terminalContent.insertBefore(outputLine, terminalContent.lastElementChild);
    }
    
    // Create visualizer bars
    function createVisualizer() {
      const visualizerBars = document.getElementById('visualizerBars');
      if (!visualizerBars) return;
      
      visualizerBars.innerHTML = '';
      
      for (let i = 0; i < 20; i++) {
        const bar = document.createElement('div');
        bar.className = 'visualizer-bar';
        bar.style.animationDelay = (i * 0.1) + 's';
        visualizerBars.appendChild(bar);
      }
    }
    
    // Play sound effect
    function playSound(soundName) {
      if (soundEffectsToggle && soundEffectsToggle.classList.contains('active')) {
        const sound = soundEffects[soundName];
        if (sound) {
          sound.currentTime = 0;
          sound.play().catch(e => console.log('Sound play failed:', e));
        }
      }
    }
    
    // Close menus when clicking outside
    document.addEventListener('click', function(event) {
      if (!startButton.contains(event.target) && !startMenu.contains(event.target)) {
        startMenu.classList.remove('active');
      }
      
      if (!networkControl.contains(event.target) && !wifiMenu.contains(event.target)) {
        wifiMenu.classList.remove('active');
      }
      
      if (!settingsButton.contains(event.target) && !settingsPanel.contains(event.target)) {
        settingsPanel.classList.remove('active');
      }
    });
    
    // Update system info periodically
    setInterval(updateSystemInfo, 5000);
    
    // Initialize system on DOM load
    document.addEventListener('DOMContentLoaded', () => {
      // System will be initialized after loading screen
    });
  </script>
</body>
</html>
